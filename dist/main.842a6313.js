parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XJqx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setMatrixArrayType=a,exports.toRadian=s,exports.equals=p,exports.RANDOM=exports.ARRAY_TYPE=exports.EPSILON=void 0;var r=1e-6;exports.EPSILON=r;var t="undefined"!=typeof Float32Array?Float32Array:Array;exports.ARRAY_TYPE=t;var e=Math.random;function a(r){exports.ARRAY_TYPE=t=r}exports.RANDOM=e;var o=Math.PI/180;function s(r){return r*o}function p(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))}
},{}],"eN7R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.copy=o,exports.identity=a,exports.fromValues=u,exports.set=s,exports.transpose=i,exports.invert=p,exports.adjoint=c,exports.determinant=f,exports.multiply=x,exports.rotate=l,exports.scale=M,exports.fromRotation=h,exports.fromScaling=b,exports.str=v,exports.frob=m,exports.LDU=d,exports.add=P,exports.subtract=y,exports.exactEquals=O,exports.equals=A,exports.multiplyScalar=w,exports.multiplyScalarAndAdd=E,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function u(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function i(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function p(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],u=e*a-o*n;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-o*u,t[3]=e*u,t):null}function c(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function f(t){return t[0]*t[3]-t[2]*t[1]}function x(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return t[0]=n*s+a*i,t[1]=o*s+u*i,t[2]=n*p+a*c,t[3]=o*p+u*c,t}function l(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=Math.sin(e),i=Math.cos(e);return t[0]=n*i+a*s,t[1]=o*i+u*s,t[2]=n*-s+a*i,t[3]=o*-s+u*i,t}function M(t,r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1];return t[0]=n*s,t[1]=o*s,t[2]=a*i,t[3]=u*i,t}function h(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function b(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function v(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function m(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function d(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function y(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function O(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function A(r,e){var n=r[0],o=r[1],a=r[2],u=r[3],s=e[0],i=e[1],p=e[2],c=e[3];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(u-c)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))}function w(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function E(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}var R=x;exports.mul=R;var j=y;exports.sub=j;
},{"./common.js":"XJqx"}],"M21d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=a,exports.copy=n,exports.identity=o,exports.fromValues=s,exports.set=u,exports.invert=i,exports.determinant=p,exports.multiply=c,exports.rotate=f,exports.scale=M,exports.translate=h,exports.fromRotation=x,exports.fromScaling=l,exports.fromTranslation=b,exports.str=m,exports.frob=v,exports.add=P,exports.subtract=d,exports.multiplyScalar=O,exports.multiplyScalarAndAdd=y,exports.exactEquals=w,exports.equals=A,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(6);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function a(r){var e=new t.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function o(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(r,e,a,n,o,s){var u=new t.ARRAY_TYPE(6);return u[0]=r,u[1]=e,u[2]=a,u[3]=n,u[4]=o,u[5]=s,u}function u(t,r,e,a,n,o,s){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t}function i(t,r){var e=r[0],a=r[1],n=r[2],o=r[3],s=r[4],u=r[5],i=e*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-a*i,t[2]=-n*i,t[3]=e*i,t[4]=(n*u-o*s)*i,t[5]=(a*s-e*u)*i,t):null}function p(t){return t[0]*t[3]-t[1]*t[2]}function c(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return t[0]=a*p+o*c,t[1]=n*p+s*c,t[2]=a*f+o*M,t[3]=n*f+s*M,t[4]=a*h+o*x+u,t[5]=n*h+s*x+i,t}function f(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=Math.sin(e),c=Math.cos(e);return t[0]=a*c+o*p,t[1]=n*c+s*p,t[2]=a*-p+o*c,t[3]=n*-p+s*c,t[4]=u,t[5]=i,t}function M(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a*p,t[1]=n*p,t[2]=o*c,t[3]=s*c,t[4]=u,t[5]=i,t}function h(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=a*p+o*c+u,t[5]=n*p+s*c+i,t}function x(t,r){var e=Math.sin(r),a=Math.cos(r);return t[0]=a,t[1]=e,t[2]=-e,t[3]=a,t[4]=0,t[5]=0,t}function l(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function b(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function m(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function v(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function P(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function d(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function O(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function y(t,r,e,a){return t[0]=r[0]+e[0]*a,t[1]=r[1]+e[1]*a,t[2]=r[2]+e[2]*a,t[3]=r[3]+e[3]*a,t[4]=r[4]+e[4]*a,t[5]=r[5]+e[5]*a,t}function w(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function A(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],i=r[5],p=e[0],c=e[1],f=e[2],M=e[3],h=e[4],x=e[5];return Math.abs(a-p)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(n-c)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-f)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-h)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(i-x)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))}var E=c;exports.mul=E;var R=d;exports.sub=R;
},{"./common.js":"XJqx"}],"vtQf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.fromMat4=n,exports.clone=e,exports.copy=o,exports.fromValues=s,exports.set=u,exports.identity=p,exports.transpose=i,exports.invert=M,exports.adjoint=c,exports.determinant=h,exports.multiply=f,exports.translate=x,exports.rotate=b,exports.scale=l,exports.fromTranslation=m,exports.fromRotation=v,exports.fromScaling=P,exports.fromMat2d=O,exports.fromQuat=d,exports.normalFromMat4=w,exports.projection=E,exports.str=y,exports.frob=S,exports.add=A,exports.subtract=j,exports.multiplyScalar=I,exports.multiplyScalarAndAdd=L,exports.exactEquals=N,exports.equals=R,exports.sub=exports.mul=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,a):{};n.get||n.set?Object.defineProperty(r,a,n):r[a]=t[a]}return r.default=t,r}function a(){var r=new t.ARRAY_TYPE(9);return t.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function n(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function e(r){var a=new t.ARRAY_TYPE(9);return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a}function o(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function s(r,a,n,e,o,s,u,p,i){var M=new t.ARRAY_TYPE(9);return M[0]=r,M[1]=a,M[2]=n,M[3]=e,M[4]=o,M[5]=s,M[6]=u,M[7]=p,M[8]=i,M}function u(t,r,a,n,e,o,s,u,p,i){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t[8]=i,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function i(t,r){if(t===r){var a=r[1],n=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function M(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=M*s-u*i,h=-M*o+u*p,f=i*o-s*p,x=a*c+n*h+e*f;return x?(x=1/x,t[0]=c*x,t[1]=(-M*n+e*i)*x,t[2]=(u*n-e*s)*x,t[3]=h*x,t[4]=(M*a-e*p)*x,t[5]=(-u*a+e*o)*x,t[6]=f*x,t[7]=(-i*a+n*p)*x,t[8]=(s*a-n*o)*x,t):null}function c(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8];return t[0]=s*M-u*i,t[1]=e*i-n*M,t[2]=n*u-e*s,t[3]=u*p-o*M,t[4]=a*M-e*p,t[5]=e*o-a*u,t[6]=o*i-s*p,t[7]=n*p-a*i,t[8]=a*s-n*o,t}function h(t){var r=t[0],a=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],p=t[7],i=t[8];return r*(i*o-s*p)+a*(-i*e+s*u)+n*(p*e-o*u)}function f(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return t[0]=h*n+f*s+x*i,t[1]=h*e+f*u+x*M,t[2]=h*o+f*p+x*c,t[3]=b*n+l*s+m*i,t[4]=b*e+l*u+m*M,t[5]=b*o+l*p+m*c,t[6]=v*n+P*s+O*i,t[7]=v*e+P*u+O*M,t[8]=v*o+P*p+O*c,t}function x(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=s,t[4]=u,t[5]=p,t[6]=h*n+f*s+i,t[7]=h*e+f*u+M,t[8]=h*o+f*p+c,t}function b(t,r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=Math.sin(a),f=Math.cos(a);return t[0]=f*n+h*s,t[1]=f*e+h*u,t[2]=f*o+h*p,t[3]=f*s-h*n,t[4]=f*u-h*e,t[5]=f*p-h*o,t[6]=i,t[7]=M,t[8]=c,t}function l(t,r,a){var n=a[0],e=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function m(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function v(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function P(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function O(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function d(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=a+a,u=n+n,p=e+e,i=a*s,M=n*s,c=n*u,h=e*s,f=e*u,x=e*p,b=o*s,l=o*u,m=o*p;return t[0]=1-c-x,t[3]=M-m,t[6]=h+l,t[1]=M+m,t[4]=1-i-x,t[7]=f-b,t[2]=h-l,t[5]=f+b,t[8]=1-i-c,t}function w(t,r){var a=r[0],n=r[1],e=r[2],o=r[3],s=r[4],u=r[5],p=r[6],i=r[7],M=r[8],c=r[9],h=r[10],f=r[11],x=r[12],b=r[13],l=r[14],m=r[15],v=a*u-n*s,P=a*p-e*s,O=a*i-o*s,d=n*p-e*u,w=n*i-o*u,E=e*i-o*p,y=M*b-c*x,S=M*l-h*x,A=M*m-f*x,j=c*l-h*b,I=c*m-f*b,L=h*m-f*l,N=v*L-P*I+O*j+d*A-w*S+E*y;return N?(N=1/N,t[0]=(u*L-p*I+i*j)*N,t[1]=(p*A-s*L-i*S)*N,t[2]=(s*I-u*A+i*y)*N,t[3]=(e*I-n*L-o*j)*N,t[4]=(a*L-e*A+o*S)*N,t[5]=(n*A-a*I-o*y)*N,t[6]=(b*E-l*w+m*d)*N,t[7]=(l*O-x*E-m*P)*N,t[8]=(x*w-b*O+m*v)*N,t):null}function E(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function y(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function S(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function A(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function j(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function I(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function L(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function N(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function R(r,a){var n=r[0],e=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],M=r[7],c=r[8],h=a[0],f=a[1],x=a[2],b=a[3],l=a[4],m=a[5],v=a[6],P=a[7],O=a[8];return Math.abs(n-h)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-f)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-x)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(s-b)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-l)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(p-m)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(i-v)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(M-P)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(c-O)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))}var Y=f;exports.mul=Y;var _=j;exports.sub=_;
},{"./common.js":"XJqx"}],"w3aR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=r,exports.clone=n,exports.copy=o,exports.fromValues=e,exports.set=s,exports.identity=h,exports.transpose=M,exports.invert=u,exports.adjoint=i,exports.determinant=p,exports.multiply=c,exports.translate=f,exports.scale=x,exports.rotate=b,exports.rotateX=l,exports.rotateY=v,exports.rotateZ=m,exports.fromTranslation=P,exports.fromScaling=O,exports.fromRotation=E,exports.fromXRotation=S,exports.fromYRotation=w,exports.fromZRotation=I,exports.fromRotationTranslation=L,exports.fromQuat2=N,exports.getTranslation=q,exports.getScaling=R,exports.getRotation=d,exports.fromRotationTranslationScale=g,exports.fromRotationTranslationScaleOrigin=A,exports.fromQuat=y,exports.frustum=Y,exports.perspective=T,exports.perspectiveFromFieldOfView=_,exports.ortho=j,exports.lookAt=D,exports.targetTo=F,exports.str=Q,exports.frob=V,exports.add=X,exports.subtract=Z,exports.multiplyScalar=k,exports.multiplyScalarAndAdd=z,exports.exactEquals=B,exports.equals=C,exports.sub=exports.mul=void 0;var t=a(require("./common.js"));function a(t){if(t&&t.__esModule)return t;var a={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};n.get||n.set?Object.defineProperty(a,r,n):a[r]=t[r]}return a.default=t,a}function r(){var a=new t.ARRAY_TYPE(16);return t.ARRAY_TYPE!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a}function n(a){var r=new t.ARRAY_TYPE(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r}function o(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function e(a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){var v=new t.ARRAY_TYPE(16);return v[0]=a,v[1]=r,v[2]=n,v[3]=o,v[4]=e,v[5]=s,v[6]=h,v[7]=M,v[8]=u,v[9]=i,v[10]=p,v[11]=c,v[12]=f,v[13]=x,v[14]=b,v[15]=l,v}function s(t,a,r,n,o,e,s,h,M,u,i,p,c,f,x,b,l){return t[0]=a,t[1]=r,t[2]=n,t[3]=o,t[4]=e,t[5]=s,t[6]=h,t[7]=M,t[8]=u,t[9]=i,t[10]=p,t[11]=c,t[12]=f,t[13]=x,t[14]=b,t[15]=l,t}function h(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,a){if(t===a){var r=a[1],n=a[2],o=a[3],e=a[6],s=a[7],h=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=e,t[11]=a[14],t[12]=o,t[13]=s,t[14]=h}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t}function u(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15],m=r*h-n*s,P=r*M-o*s,O=r*u-e*s,E=n*M-o*h,S=n*u-e*h,w=o*u-e*M,I=i*b-p*x,L=i*l-c*x,N=i*v-f*x,q=p*l-c*b,R=p*v-f*b,d=c*v-f*l,g=m*d-P*R+O*q+E*N-S*L+w*I;return g?(g=1/g,t[0]=(h*d-M*R+u*q)*g,t[1]=(o*R-n*d-e*q)*g,t[2]=(b*w-l*S+v*E)*g,t[3]=(c*S-p*w-f*E)*g,t[4]=(M*N-s*d-u*L)*g,t[5]=(r*d-o*N+e*L)*g,t[6]=(l*O-x*w-v*P)*g,t[7]=(i*w-c*O+f*P)*g,t[8]=(s*R-h*N+u*I)*g,t[9]=(n*N-r*R-e*I)*g,t[10]=(x*S-b*O+v*m)*g,t[11]=(p*O-i*S-f*m)*g,t[12]=(h*L-s*q-M*I)*g,t[13]=(r*q-n*L+o*I)*g,t[14]=(b*P-x*E-l*m)*g,t[15]=(i*E-p*P+c*m)*g,t):null}function i(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=a[4],h=a[5],M=a[6],u=a[7],i=a[8],p=a[9],c=a[10],f=a[11],x=a[12],b=a[13],l=a[14],v=a[15];return t[0]=h*(c*v-f*l)-p*(M*v-u*l)+b*(M*f-u*c),t[1]=-(n*(c*v-f*l)-p*(o*v-e*l)+b*(o*f-e*c)),t[2]=n*(M*v-u*l)-h*(o*v-e*l)+b*(o*u-e*M),t[3]=-(n*(M*f-u*c)-h*(o*f-e*c)+p*(o*u-e*M)),t[4]=-(s*(c*v-f*l)-i*(M*v-u*l)+x*(M*f-u*c)),t[5]=r*(c*v-f*l)-i*(o*v-e*l)+x*(o*f-e*c),t[6]=-(r*(M*v-u*l)-s*(o*v-e*l)+x*(o*u-e*M)),t[7]=r*(M*f-u*c)-s*(o*f-e*c)+i*(o*u-e*M),t[8]=s*(p*v-f*b)-i*(h*v-u*b)+x*(h*f-u*p),t[9]=-(r*(p*v-f*b)-i*(n*v-e*b)+x*(n*f-e*p)),t[10]=r*(h*v-u*b)-s*(n*v-e*b)+x*(n*u-e*h),t[11]=-(r*(h*f-u*p)-s*(n*f-e*p)+i*(n*u-e*h)),t[12]=-(s*(p*l-c*b)-i*(h*l-M*b)+x*(h*c-M*p)),t[13]=r*(p*l-c*b)-i*(n*l-o*b)+x*(n*c-o*p),t[14]=-(r*(h*l-M*b)-s*(n*l-o*b)+x*(n*M-o*h)),t[15]=r*(h*c-M*p)-s*(n*c-o*p)+i*(n*M-o*h),t}function p(t){var a=t[0],r=t[1],n=t[2],o=t[3],e=t[4],s=t[5],h=t[6],M=t[7],u=t[8],i=t[9],p=t[10],c=t[11],f=t[12],x=t[13],b=t[14],l=t[15];return(a*s-r*e)*(p*l-c*b)-(a*h-n*e)*(i*l-c*x)+(a*M-o*e)*(i*b-p*x)+(r*h-n*s)*(u*l-c*f)-(r*M-o*s)*(u*b-p*f)+(n*M-o*h)*(u*x-i*f)}function c(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3];return t[0]=P*n+O*h+E*p+S*b,t[1]=P*o+O*M+E*c+S*l,t[2]=P*e+O*u+E*f+S*v,t[3]=P*s+O*i+E*x+S*m,P=r[4],O=r[5],E=r[6],S=r[7],t[4]=P*n+O*h+E*p+S*b,t[5]=P*o+O*M+E*c+S*l,t[6]=P*e+O*u+E*f+S*v,t[7]=P*s+O*i+E*x+S*m,P=r[8],O=r[9],E=r[10],S=r[11],t[8]=P*n+O*h+E*p+S*b,t[9]=P*o+O*M+E*c+S*l,t[10]=P*e+O*u+E*f+S*v,t[11]=P*s+O*i+E*x+S*m,P=r[12],O=r[13],E=r[14],S=r[15],t[12]=P*n+O*h+E*p+S*b,t[13]=P*o+O*M+E*c+S*l,t[14]=P*e+O*u+E*f+S*v,t[15]=P*s+O*i+E*x+S*m,t}function f(t,a,r){var n,o,e,s,h,M,u,i,p,c,f,x,b=r[0],l=r[1],v=r[2];return a===t?(t[12]=a[0]*b+a[4]*l+a[8]*v+a[12],t[13]=a[1]*b+a[5]*l+a[9]*v+a[13],t[14]=a[2]*b+a[6]*l+a[10]*v+a[14],t[15]=a[3]*b+a[7]*l+a[11]*v+a[15]):(n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],t[0]=n,t[1]=o,t[2]=e,t[3]=s,t[4]=h,t[5]=M,t[6]=u,t[7]=i,t[8]=p,t[9]=c,t[10]=f,t[11]=x,t[12]=n*b+h*l+p*v+a[12],t[13]=o*b+M*l+c*v+a[13],t[14]=e*b+u*l+f*v+a[14],t[15]=s*b+i*l+x*v+a[15]),t}function x(t,a,r){var n=r[0],o=r[1],e=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*o,t[5]=a[5]*o,t[6]=a[6]*o,t[7]=a[7]*o,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t}function b(a,r,n,o){var e,s,h,M,u,i,p,c,f,x,b,l,v,m,P,O,E,S,w,I,L,N,q,R,d=o[0],g=o[1],A=o[2],y=Math.sqrt(d*d+g*g+A*A);return y<t.EPSILON?null:(d*=y=1/y,g*=y,A*=y,e=Math.sin(n),h=1-(s=Math.cos(n)),M=r[0],u=r[1],i=r[2],p=r[3],c=r[4],f=r[5],x=r[6],b=r[7],l=r[8],v=r[9],m=r[10],P=r[11],O=d*d*h+s,E=g*d*h+A*e,S=A*d*h-g*e,w=d*g*h-A*e,I=g*g*h+s,L=A*g*h+d*e,N=d*A*h+g*e,q=g*A*h-d*e,R=A*A*h+s,a[0]=M*O+c*E+l*S,a[1]=u*O+f*E+v*S,a[2]=i*O+x*E+m*S,a[3]=p*O+b*E+P*S,a[4]=M*w+c*I+l*L,a[5]=u*w+f*I+v*L,a[6]=i*w+x*I+m*L,a[7]=p*w+b*I+P*L,a[8]=M*N+c*q+l*R,a[9]=u*N+f*q+v*R,a[10]=i*N+x*q+m*R,a[11]=p*N+b*q+P*R,r!==a&&(a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a)}function l(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[4],s=a[5],h=a[6],M=a[7],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=e*o+u*n,t[5]=s*o+i*n,t[6]=h*o+p*n,t[7]=M*o+c*n,t[8]=u*o-e*n,t[9]=i*o-s*n,t[10]=p*o-h*n,t[11]=c*o-M*n,t}function v(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[8],i=a[9],p=a[10],c=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o-u*n,t[1]=s*o-i*n,t[2]=h*o-p*n,t[3]=M*o-c*n,t[8]=e*n+u*o,t[9]=s*n+i*o,t[10]=h*n+p*o,t[11]=M*n+c*o,t}function m(t,a,r){var n=Math.sin(r),o=Math.cos(r),e=a[0],s=a[1],h=a[2],M=a[3],u=a[4],i=a[5],p=a[6],c=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=e*o+u*n,t[1]=s*o+i*n,t[2]=h*o+p*n,t[3]=M*o+c*n,t[4]=u*o-e*n,t[5]=i*o-s*n,t[6]=p*o-h*n,t[7]=c*o-M*n,t}function P(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function O(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(a,r,n){var o,e,s,h=n[0],M=n[1],u=n[2],i=Math.sqrt(h*h+M*M+u*u);return i<t.EPSILON?null:(h*=i=1/i,M*=i,u*=i,o=Math.sin(r),s=1-(e=Math.cos(r)),a[0]=h*h*s+e,a[1]=M*h*s+u*o,a[2]=u*h*s-M*o,a[3]=0,a[4]=h*M*s-u*o,a[5]=M*M*s+e,a[6]=u*M*s+h*o,a[7]=0,a[8]=h*u*s+M*o,a[9]=M*u*s-h*o,a[10]=u*u*s+e,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}function S(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=n+n,M=o+o,u=e+e,i=n*h,p=n*M,c=n*u,f=o*M,x=o*u,b=e*u,l=s*h,v=s*M,m=s*u;return t[0]=1-(f+b),t[1]=p+m,t[2]=c-v,t[3]=0,t[4]=p-m,t[5]=1-(i+b),t[6]=x+l,t[7]=0,t[8]=c+v,t[9]=x-l,t[10]=1-(i+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function N(a,r){var n=new t.ARRAY_TYPE(3),o=-r[0],e=-r[1],s=-r[2],h=r[3],M=r[4],u=r[5],i=r[6],p=r[7],c=o*o+e*e+s*s+h*h;return c>0?(n[0]=2*(M*h+p*o+u*s-i*e)/c,n[1]=2*(u*h+p*e+i*o-M*s)/c,n[2]=2*(i*h+p*s+M*e-u*o)/c):(n[0]=2*(M*h+p*o+u*s-i*e),n[1]=2*(u*h+p*e+i*o-M*s),n[2]=2*(i*h+p*s+M*e-u*o)),L(a,r,n),a}function q(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t}function R(t,a){var r=a[0],n=a[1],o=a[2],e=a[4],s=a[5],h=a[6],M=a[8],u=a[9],i=a[10];return t[0]=Math.sqrt(r*r+n*n+o*o),t[1]=Math.sqrt(e*e+s*s+h*h),t[2]=Math.sqrt(M*M+u*u+i*i),t}function d(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t}function g(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=a[3],M=o+o,u=e+e,i=s+s,p=o*M,c=o*u,f=o*i,x=e*u,b=e*i,l=s*i,v=h*M,m=h*u,P=h*i,O=n[0],E=n[1],S=n[2];return t[0]=(1-(x+l))*O,t[1]=(c+P)*O,t[2]=(f-m)*O,t[3]=0,t[4]=(c-P)*E,t[5]=(1-(p+l))*E,t[6]=(b+v)*E,t[7]=0,t[8]=(f+m)*S,t[9]=(b-v)*S,t[10]=(1-(p+x))*S,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function A(t,a,r,n,o){var e=a[0],s=a[1],h=a[2],M=a[3],u=e+e,i=s+s,p=h+h,c=e*u,f=e*i,x=e*p,b=s*i,l=s*p,v=h*p,m=M*u,P=M*i,O=M*p,E=n[0],S=n[1],w=n[2],I=o[0],L=o[1],N=o[2],q=(1-(b+v))*E,R=(f+O)*E,d=(x-P)*E,g=(f-O)*S,A=(1-(c+v))*S,y=(l+m)*S,Y=(x+P)*w,T=(l-m)*w,_=(1-(c+b))*w;return t[0]=q,t[1]=R,t[2]=d,t[3]=0,t[4]=g,t[5]=A,t[6]=y,t[7]=0,t[8]=Y,t[9]=T,t[10]=_,t[11]=0,t[12]=r[0]+I-(q*I+g*L+Y*N),t[13]=r[1]+L-(R*I+A*L+T*N),t[14]=r[2]+N-(d*I+y*L+_*N),t[15]=1,t}function y(t,a){var r=a[0],n=a[1],o=a[2],e=a[3],s=r+r,h=n+n,M=o+o,u=r*s,i=n*s,p=n*h,c=o*s,f=o*h,x=o*M,b=e*s,l=e*h,v=e*M;return t[0]=1-p-x,t[1]=i+v,t[2]=c-l,t[3]=0,t[4]=i-v,t[5]=1-u-x,t[6]=f+b,t[7]=0,t[8]=c+l,t[9]=f-b,t[10]=1-u-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,a,r,n,o,e,s){var h=1/(r-a),M=1/(o-n),u=1/(e-s);return t[0]=2*e*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*M,t[6]=0,t[7]=0,t[8]=(r+a)*h,t[9]=(o+n)*M,t[10]=(s+e)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*e*2*u,t[15]=0,t}function T(t,a,r,n,o){var e,s=1/Math.tan(a/2);return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(e=1/(n-o),t[10]=(o+n)*e,t[14]=2*o*n*e):(t[10]=-1,t[14]=-2*n),t}function _(t,a,r,n){var o=Math.tan(a.upDegrees*Math.PI/180),e=Math.tan(a.downDegrees*Math.PI/180),s=Math.tan(a.leftDegrees*Math.PI/180),h=Math.tan(a.rightDegrees*Math.PI/180),M=2/(s+h),u=2/(o+e);return t[0]=M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-h)*M*.5,t[9]=(o-e)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function j(t,a,r,n,o,e,s){var h=1/(a-r),M=1/(n-o),u=1/(e-s);return t[0]=-2*h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(a+r)*h,t[13]=(o+n)*M,t[14]=(s+e)*u,t[15]=1,t}function D(a,r,n,o){var e,s,M,u,i,p,c,f,x,b,l=r[0],v=r[1],m=r[2],P=o[0],O=o[1],E=o[2],S=n[0],w=n[1],I=n[2];return Math.abs(l-S)<t.EPSILON&&Math.abs(v-w)<t.EPSILON&&Math.abs(m-I)<t.EPSILON?h(a):(c=l-S,f=v-w,x=m-I,e=O*(x*=b=1/Math.sqrt(c*c+f*f+x*x))-E*(f*=b),s=E*(c*=b)-P*x,M=P*f-O*c,(b=Math.sqrt(e*e+s*s+M*M))?(e*=b=1/b,s*=b,M*=b):(e=0,s=0,M=0),u=f*M-x*s,i=x*e-c*M,p=c*s-f*e,(b=Math.sqrt(u*u+i*i+p*p))?(u*=b=1/b,i*=b,p*=b):(u=0,i=0,p=0),a[0]=e,a[1]=u,a[2]=c,a[3]=0,a[4]=s,a[5]=i,a[6]=f,a[7]=0,a[8]=M,a[9]=p,a[10]=x,a[11]=0,a[12]=-(e*l+s*v+M*m),a[13]=-(u*l+i*v+p*m),a[14]=-(c*l+f*v+x*m),a[15]=1,a)}function F(t,a,r,n){var o=a[0],e=a[1],s=a[2],h=n[0],M=n[1],u=n[2],i=o-r[0],p=e-r[1],c=s-r[2],f=i*i+p*p+c*c;f>0&&(i*=f=1/Math.sqrt(f),p*=f,c*=f);var x=M*c-u*p,b=u*i-h*c,l=h*p-M*i;return(f=x*x+b*b+l*l)>0&&(x*=f=1/Math.sqrt(f),b*=f,l*=f),t[0]=x,t[1]=b,t[2]=l,t[3]=0,t[4]=p*l-c*b,t[5]=c*x-i*l,t[6]=i*b-p*x,t[7]=0,t[8]=i,t[9]=p,t[10]=c,t[11]=0,t[12]=o,t[13]=e,t[14]=s,t[15]=1,t}function Q(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function V(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function X(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t}function Z(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t}function k(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t}function z(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t}function B(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]}function C(a,r){var n=a[0],o=a[1],e=a[2],s=a[3],h=a[4],M=a[5],u=a[6],i=a[7],p=a[8],c=a[9],f=a[10],x=a[11],b=a[12],l=a[13],v=a[14],m=a[15],P=r[0],O=r[1],E=r[2],S=r[3],w=r[4],I=r[5],L=r[6],N=r[7],q=r[8],R=r[9],d=r[10],g=r[11],A=r[12],y=r[13],Y=r[14],T=r[15];return Math.abs(n-P)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(o-O)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(e-E)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(s-S)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(h-w)<=t.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(M-I)<=t.EPSILON*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(u-L)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(i-N)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(N))&&Math.abs(p-q)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(q))&&Math.abs(c-R)<=t.EPSILON*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-d)<=t.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))&&Math.abs(x-g)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(g))&&Math.abs(b-A)<=t.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))&&Math.abs(l-y)<=t.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(v-Y)<=t.EPSILON*Math.max(1,Math.abs(v),Math.abs(Y))&&Math.abs(m-T)<=t.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))}var G=c;exports.mul=G;var H=Z;exports.sub=H;
},{"./common.js":"XJqx"}],"AWBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.length=o,exports.fromValues=a,exports.copy=s,exports.set=u,exports.add=i,exports.subtract=c,exports.multiply=p,exports.divide=x,exports.ceil=f,exports.floor=h,exports.min=M,exports.max=v,exports.round=l,exports.scale=d,exports.scaleAndAdd=m,exports.distance=b,exports.squaredDistance=P,exports.squaredLength=O,exports.negate=q,exports.inverse=A,exports.normalize=y,exports.dot=E,exports.cross=R,exports.lerp=g,exports.hermite=Y,exports.bezier=_,exports.random=j,exports.transformMat4=D,exports.transformMat3=w,exports.transformQuat=L,exports.rotateX=I,exports.rotateY=N,exports.rotateZ=T,exports.angle=z,exports.zero=S,exports.str=F,exports.exactEquals=Q,exports.equals=V,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(3);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function n(r){var e=new t.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function o(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function a(r,e,n){var o=new t.ARRAY_TYPE(3);return o[0]=r,o[1]=e,o[2]=n,o}function s(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function u(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function i(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function c(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function p(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function x(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function f(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function h(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function M(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function v(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function d(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function m(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return Math.sqrt(e*e+n*n+o*o)}function P(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2];return e*e+n*n+o*o}function O(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function q(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function A(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function y(t,r){var e=r[0],n=r[1],o=r[2],a=e*e+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function R(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return t[0]=o*i-a*u,t[1]=a*s-n*i,t[2]=n*u-o*s,t}function g(t,r,e,n){var o=r[0],a=r[1],s=r[2];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t}function Y(t,r,e,n,o,a){var s=a*a,u=s*(2*a-3)+1,i=s*(a-2)+a,c=s*(a-1),p=s*(3-2*a);return t[0]=r[0]*u+e[0]*i+n[0]*c+o[0]*p,t[1]=r[1]*u+e[1]*i+n[1]*c+o[1]*p,t[2]=r[2]*u+e[2]*i+n[2]*c+o[2]*p,t}function _(t,r,e,n,o,a){var s=1-a,u=s*s,i=a*a,c=u*s,p=3*a*u,x=3*i*s,f=i*a;return t[0]=r[0]*c+e[0]*p+n[0]*x+o[0]*f,t[1]=r[1]*c+e[1]*p+n[1]*x+o[1]*f,t[2]=r[2]*c+e[2]*p+n[2]*x+o[2]*f,t}function j(r,e){e=e||1;var n=2*t.RANDOM()*Math.PI,o=2*t.RANDOM()-1,a=Math.sqrt(1-o*o)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=o*e,r}function D(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[3]*n+e[7]*o+e[11]*a+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*o+e[8]*a+e[12])/s,t[1]=(e[1]*n+e[5]*o+e[9]*a+e[13])/s,t[2]=(e[2]*n+e[6]*o+e[10]*a+e[14])/s,t}function w(t,r,e){var n=r[0],o=r[1],a=r[2];return t[0]=n*e[0]+o*e[3]+a*e[6],t[1]=n*e[1]+o*e[4]+a*e[7],t[2]=n*e[2]+o*e[5]+a*e[8],t}function L(t,r,e){var n=e[0],o=e[1],a=e[2],s=e[3],u=r[0],i=r[1],c=r[2],p=o*c-a*i,x=a*u-n*c,f=n*i-o*u,h=o*f-a*x,M=a*p-n*f,v=n*x-o*p,l=2*s;return p*=l,x*=l,f*=l,h*=2,M*=2,v*=2,t[0]=u+p+h,t[1]=i+x+M,t[2]=c+f+v,t}function I(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0],a[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),a[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function N(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),a[1]=o[1],a[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function T(t,r,e,n){var o=[],a=[];return o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2],a[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),a[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),a[2]=o[2],t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t}function z(t,r){var e=a(t[0],t[1],t[2]),n=a(r[0],r[1],r[2]);y(e,e),y(n,n);var o=E(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)}function S(t){return t[0]=0,t[1]=0,t[2]=0,t}function F(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Q(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function V(r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2];return Math.abs(n-s)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-u)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-i)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))}var X=c;exports.sub=X;var Z=p;exports.mul=Z;var k=x;exports.div=k;var B=b;exports.dist=B;var C=P;exports.sqrDist=C;var G=o;exports.len=G;var H=O;exports.sqrLen=H;var J=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=3),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"9+zW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=h,exports.max=M,exports.round=l,exports.scale=v,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=O,exports.squaredLength=A,exports.negate=P,exports.inverse=q,exports.normalize=R,exports.dot=E,exports.cross=y,exports.lerp=D,exports.random=g,exports.transformMat4=w,exports.transformQuat=N,exports.zero=Y,exports.str=_,exports.exactEquals=j,exports.equals=L,exports.forEach=exports.sqrLen=exports.len=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=void 0;var t=r(require("./common.js"));function r(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};n.get||n.set?Object.defineProperty(r,e,n):r[e]=t[e]}return r.default=t,r}function e(){var r=new t.ARRAY_TYPE(4);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function n(r){var e=new t.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function o(r,e,n,o){var a=new t.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=o,a}function a(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function s(t,r,e,n,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=o,t}function u(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function c(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function p(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function x(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function f(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function h(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function M(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function l(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function v(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function d(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function m(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return Math.sqrt(e*e+n*n+o*o+a*a)}function b(t,r){var e=r[0]-t[0],n=r[1]-t[1],o=r[2]-t[2],a=r[3]-t[3];return e*e+n*n+o*o+a*a}function O(t){var r=t[0],e=t[1],n=t[2],o=t[3];return Math.sqrt(r*r+e*e+n*n+o*o)}function A(t){var r=t[0],e=t[1],n=t[2],o=t[3];return r*r+e*e+n*n+o*o}function P(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function q(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function R(t,r){var e=r[0],n=r[1],o=r[2],a=r[3],s=e*e+n*n+o*o+a*a;return s>0&&(s=1/Math.sqrt(s)),t[0]=e*s,t[1]=n*s,t[2]=o*s,t[3]=a*s,t}function E(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function y(t,r,e,n){var o=e[0]*n[1]-e[1]*n[0],a=e[0]*n[2]-e[2]*n[0],s=e[0]*n[3]-e[3]*n[0],u=e[1]*n[2]-e[2]*n[1],i=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],p=r[0],x=r[1],f=r[2],h=r[3];return t[0]=x*c-f*i+h*u,t[1]=-p*c+f*s-h*a,t[2]=p*i-x*s+h*o,t[3]=-p*u+x*a-f*o,t}function D(t,r,e,n){var o=r[0],a=r[1],s=r[2],u=r[3];return t[0]=o+n*(e[0]-o),t[1]=a+n*(e[1]-a),t[2]=s+n*(e[2]-s),t[3]=u+n*(e[3]-u),t}function g(r,e){var n,o,a,s,u,i;e=e||1;do{u=(n=2*t.RANDOM()-1)*n+(o=2*t.RANDOM()-1)*o}while(u>=1);do{i=(a=2*t.RANDOM()-1)*a+(s=2*t.RANDOM()-1)*s}while(i>=1);var c=Math.sqrt((1-u)/i);return r[0]=e*n,r[1]=e*o,r[2]=e*a*c,r[3]=e*s*c,r}function w(t,r,e){var n=r[0],o=r[1],a=r[2],s=r[3];return t[0]=e[0]*n+e[4]*o+e[8]*a+e[12]*s,t[1]=e[1]*n+e[5]*o+e[9]*a+e[13]*s,t[2]=e[2]*n+e[6]*o+e[10]*a+e[14]*s,t[3]=e[3]*n+e[7]*o+e[11]*a+e[15]*s,t}function N(t,r,e){var n=r[0],o=r[1],a=r[2],s=e[0],u=e[1],i=e[2],c=e[3],p=c*n+u*a-i*o,x=c*o+i*n-s*a,f=c*a+s*o-u*n,h=-s*n-u*o-i*a;return t[0]=p*c+h*-s+x*-i-f*-u,t[1]=x*c+h*-u+f*-s-p*-i,t[2]=f*c+h*-i+p*-u-x*-s,t[3]=r[3],t}function Y(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function _(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function j(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function L(r,e){var n=r[0],o=r[1],a=r[2],s=r[3],u=e[0],i=e[1],c=e[2],p=e[3];return Math.abs(n-u)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-i)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))&&Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-p)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))}var I=i;exports.sub=I;var S=c;exports.mul=S;var T=p;exports.div=T;var z=m;exports.dist=z;var F=b;exports.sqrDist=F;var Q=O;exports.len=Q;var V=A;exports.sqrLen=V;var k=function(){var t=e();return function(r,e,n,o,a,s){var u,i;for(e||(e=4),n||(n=0),i=o?Math.min(o*e+n,r.length):r.length,u=n;u<i;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],a(t,t,s),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();exports.forEach=k;
},{"./common.js":"XJqx"}],"1KdR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=a,exports.identity=n,exports.setAxisAngle=u,exports.getAxisAngle=p,exports.multiply=c,exports.rotateX=i,exports.rotateY=x,exports.rotateZ=l,exports.calculateW=v,exports.slerp=h,exports.random=M,exports.invert=f,exports.conjugate=q,exports.fromMat3=d,exports.fromEuler=m,exports.str=P,exports.setAxes=exports.sqlerp=exports.rotationTo=exports.equals=exports.exactEquals=exports.normalize=exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.lerp=exports.dot=exports.scale=exports.mul=exports.add=exports.set=exports.copy=exports.fromValues=exports.clone=void 0;var r=s(require("./common.js")),t=s(require("./mat3.js")),e=s(require("./vec3.js")),o=s(require("./vec4.js"));function s(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};o.get||o.set?Object.defineProperty(t,e,o):t[e]=r[e]}return t.default=r,t}function a(){var t=new r.ARRAY_TYPE(4);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function n(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function u(r,t,e){e*=.5;var o=Math.sin(e);return r[0]=o*t[0],r[1]=o*t[1],r[2]=o*t[2],r[3]=Math.cos(e),r}function p(t,e){var o=2*Math.acos(e[3]),s=Math.sin(o/2);return s>r.EPSILON?(t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s):(t[0]=1,t[1]=0,t[2]=0),o}function c(r,t,e){var o=t[0],s=t[1],a=t[2],n=t[3],u=e[0],p=e[1],c=e[2],i=e[3];return r[0]=o*i+n*u+s*c-a*p,r[1]=s*i+n*p+a*u-o*c,r[2]=a*i+n*c+o*p-s*u,r[3]=n*i-o*u-s*p-a*c,r}function i(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+n*u,r[1]=s*p+a*u,r[2]=a*p-s*u,r[3]=n*p-o*u,r}function x(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p-a*u,r[1]=s*p+n*u,r[2]=a*p+o*u,r[3]=n*p-s*u,r}function l(r,t,e){e*=.5;var o=t[0],s=t[1],a=t[2],n=t[3],u=Math.sin(e),p=Math.cos(e);return r[0]=o*p+s*u,r[1]=s*p-o*u,r[2]=a*p+n*u,r[3]=n*p-a*u,r}function v(r,t){var e=t[0],o=t[1],s=t[2];return r[0]=e,r[1]=o,r[2]=s,r[3]=Math.sqrt(Math.abs(1-e*e-o*o-s*s)),r}function h(t,e,o,s){var a,n,u,p,c,i=e[0],x=e[1],l=e[2],v=e[3],h=o[0],M=o[1],f=o[2],q=o[3];return(n=i*h+x*M+l*f+v*q)<0&&(n=-n,h=-h,M=-M,f=-f,q=-q),1-n>r.EPSILON?(a=Math.acos(n),u=Math.sin(a),p=Math.sin((1-s)*a)/u,c=Math.sin(s*a)/u):(p=1-s,c=s),t[0]=p*i+c*h,t[1]=p*x+c*M,t[2]=p*l+c*f,t[3]=p*v+c*q,t}function M(t){var e=r.RANDOM(),o=r.RANDOM(),s=r.RANDOM(),a=Math.sqrt(1-e),n=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*o),t[1]=a*Math.cos(2*Math.PI*o),t[2]=n*Math.sin(2*Math.PI*s),t[3]=n*Math.cos(2*Math.PI*s),t}function f(r,t){var e=t[0],o=t[1],s=t[2],a=t[3],n=e*e+o*o+s*s+a*a,u=n?1/n:0;return r[0]=-e*u,r[1]=-o*u,r[2]=-s*u,r[3]=a*u,r}function q(r,t){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=t[3],r}function d(r,t){var e,o=t[0]+t[4]+t[8];if(o>0)e=Math.sqrt(o+1),r[3]=.5*e,e=.5/e,r[0]=(t[5]-t[7])*e,r[1]=(t[6]-t[2])*e,r[2]=(t[1]-t[3])*e;else{var s=0;t[4]>t[0]&&(s=1),t[8]>t[3*s+s]&&(s=2);var a=(s+1)%3,n=(s+2)%3;e=Math.sqrt(t[3*s+s]-t[3*a+a]-t[3*n+n]+1),r[s]=.5*e,e=.5/e,r[3]=(t[3*a+n]-t[3*n+a])*e,r[a]=(t[3*a+s]+t[3*s+a])*e,r[n]=(t[3*n+s]+t[3*s+n])*e}return r}function m(r,t,e,o){var s=.5*Math.PI/180;t*=s,e*=s,o*=s;var a=Math.sin(t),n=Math.cos(t),u=Math.sin(e),p=Math.cos(e),c=Math.sin(o),i=Math.cos(o);return r[0]=a*p*i-n*u*c,r[1]=n*u*i+a*p*c,r[2]=n*p*c-a*u*i,r[3]=n*p*i+a*u*c,r}function P(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var A=o.clone;exports.clone=A;var O=o.fromValues;exports.fromValues=O;var g=o.copy;exports.copy=g;var y=o.set;exports.set=y;var j=o.add;exports.add=j;var E=c;exports.mul=E;var I=o.scale;exports.scale=I;var b=o.dot;exports.dot=b;var L=o.lerp;exports.lerp=L;var R=o.length;exports.length=R;var _=R;exports.len=_;var D=o.squaredLength;exports.squaredLength=D;var N=D;exports.sqrLen=N;var V=o.normalize;exports.normalize=V;var Y=o.exactEquals;exports.exactEquals=Y;var w=o.equals;exports.equals=w;var z=function(){var r=e.create(),t=e.fromValues(1,0,0),o=e.fromValues(0,1,0);return function(s,a,n){var p=e.dot(a,n);return p<-.999999?(e.cross(r,t,a),e.len(r)<1e-6&&e.cross(r,o,a),e.normalize(r,r),u(s,r,Math.PI),s):p>.999999?(s[0]=0,s[1]=0,s[2]=0,s[3]=1,s):(e.cross(r,a,n),s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=1+p,V(s,s))}}();exports.rotationTo=z;var T=function(){var r=a(),t=a();return function(e,o,s,a,n,u){return h(r,o,n,u),h(t,s,a,u),h(e,r,t,2*u*(1-u)),e}}();exports.sqlerp=T;var S=function(){var r=t.create();return function(t,e,o,s){return r[0]=o[0],r[3]=o[1],r[6]=o[2],r[1]=s[0],r[4]=s[1],r[7]=s[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],V(t,d(t,r))}}();exports.setAxes=S;
},{"./common.js":"XJqx","./mat3.js":"vtQf","./vec3.js":"AWBd","./vec4.js":"9+zW"}],"6buG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=n,exports.clone=o,exports.fromValues=s,exports.fromRotationTranslationValues=u,exports.fromRotationTranslation=p,exports.fromTranslation=i,exports.fromRotation=x,exports.fromMat4=c,exports.copy=f,exports.identity=h,exports.set=M,exports.getDual=l,exports.setDual=P,exports.getTranslation=m,exports.translate=R,exports.rotateX=d,exports.rotateY=O,exports.rotateZ=g,exports.rotateByQuatAppend=A,exports.rotateByQuatPrepend=E,exports.rotateAroundAxis=y,exports.add=q,exports.multiply=L,exports.scale=T,exports.lerp=_,exports.invert=I,exports.conjugate=N,exports.normalize=Q,exports.str=V,exports.exactEquals=X,exports.equals=Z,exports.sqrLen=exports.squaredLength=exports.len=exports.length=exports.dot=exports.mul=exports.setReal=exports.getReal=void 0;var t=a(require("./common.js")),r=a(require("./quat.js")),e=a(require("./mat4.js"));function a(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,e):{};a.get||a.set?Object.defineProperty(r,e,a):r[e]=t[e]}return r.default=t,r}function n(){var r=new t.ARRAY_TYPE(8);return t.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function o(r){var e=new t.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function s(r,e,a,n,o,s,u,p){var i=new t.ARRAY_TYPE(8);return i[0]=r,i[1]=e,i[2]=a,i[3]=n,i[4]=o,i[5]=s,i[6]=u,i[7]=p,i}function u(r,e,a,n,o,s,u){var p=new t.ARRAY_TYPE(8);p[0]=r,p[1]=e,p[2]=a,p[3]=n;var i=.5*o,x=.5*s,c=.5*u;return p[4]=i*n+x*a-c*e,p[5]=x*n+c*r-i*a,p[6]=c*n+i*e-x*r,p[7]=-i*r-x*e-c*a,p}function p(t,r,e){var a=.5*e[0],n=.5*e[1],o=.5*e[2],s=r[0],u=r[1],p=r[2],i=r[3];return t[0]=s,t[1]=u,t[2]=p,t[3]=i,t[4]=a*i+n*p-o*u,t[5]=n*i+o*s-a*p,t[6]=o*i+a*u-n*s,t[7]=-a*s-n*u-o*p,t}function i(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function x(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function c(a,n){var o=r.create();e.getRotation(o,n);var s=new t.ARRAY_TYPE(3);return e.getTranslation(s,n),p(a,o,s),a}function f(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function h(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function M(t,r,e,a,n,o,s,u,p){return t[0]=r,t[1]=e,t[2]=a,t[3]=n,t[4]=o,t[5]=s,t[6]=u,t[7]=p,t}var v=r.copy;function l(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}exports.getReal=v;var b=r.copy;function P(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function m(t,r){var e=r[4],a=r[5],n=r[6],o=r[7],s=-r[0],u=-r[1],p=-r[2],i=r[3];return t[0]=2*(e*i+o*s+a*p-n*u),t[1]=2*(a*i+o*u+n*s-e*p),t[2]=2*(n*i+o*p+e*u-a*s),t}function R(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=.5*e[0],p=.5*e[1],i=.5*e[2],x=r[4],c=r[5],f=r[6],h=r[7];return t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=s*u+n*i-o*p+x,t[5]=s*p+o*u-a*i+c,t[6]=s*i+a*p-n*u+f,t[7]=-a*u-n*p-o*i+h,t}function d(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateX(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function O(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateY(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function g(t,e,a){var n=-e[0],o=-e[1],s=-e[2],u=e[3],p=e[4],i=e[5],x=e[6],c=e[7],f=p*u+c*n+i*s-x*o,h=i*u+c*o+x*n-p*s,M=x*u+c*s+p*o-i*n,v=c*u-p*n-i*o-x*s;return r.rotateZ(t,e,a),n=t[0],o=t[1],s=t[2],u=t[3],t[4]=f*u+v*n+h*s-M*o,t[5]=h*u+v*o+M*n-f*s,t[6]=M*u+v*s+f*o-h*n,t[7]=v*u-f*n-h*o-M*s,t}function A(t,r,e){var a=e[0],n=e[1],o=e[2],s=e[3],u=r[0],p=r[1],i=r[2],x=r[3];return t[0]=u*s+x*a+p*o-i*n,t[1]=p*s+x*n+i*a-u*o,t[2]=i*s+x*o+u*n-p*a,t[3]=x*s-u*a-p*n-i*o,u=r[4],p=r[5],i=r[6],x=r[7],t[4]=u*s+x*a+p*o-i*n,t[5]=p*s+x*n+i*a-u*o,t[6]=i*s+x*o+u*n-p*a,t[7]=x*s-u*a-p*n-i*o,t}function E(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[0],p=e[1],i=e[2],x=e[3];return t[0]=a*x+s*u+n*i-o*p,t[1]=n*x+s*p+o*u-a*i,t[2]=o*x+s*i+a*p-n*u,t[3]=s*x-a*u-n*p-o*i,u=e[4],p=e[5],i=e[6],x=e[7],t[4]=a*x+s*u+n*i-o*p,t[5]=n*x+s*p+o*u-a*i,t[6]=o*x+s*i+a*p-n*u,t[7]=s*x-a*u-n*p-o*i,t}function y(r,e,a,n){if(Math.abs(n)<t.EPSILON)return f(r,e);var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);n*=.5;var s=Math.sin(n),u=s*a[0]/o,p=s*a[1]/o,i=s*a[2]/o,x=Math.cos(n),c=e[0],h=e[1],M=e[2],v=e[3];r[0]=c*x+v*u+h*i-M*p,r[1]=h*x+v*p+M*u-c*i,r[2]=M*x+v*i+c*p-h*u,r[3]=v*x-c*u-h*p-M*i;var l=e[4],b=e[5],P=e[6],m=e[7];return r[4]=l*x+m*u+b*i-P*p,r[5]=b*x+m*p+P*u-l*i,r[6]=P*x+m*i+l*p-b*u,r[7]=m*x-l*u-b*p-P*i,r}function q(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function L(t,r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=e[4],p=e[5],i=e[6],x=e[7],c=r[4],f=r[5],h=r[6],M=r[7],v=e[0],l=e[1],b=e[2],P=e[3];return t[0]=a*P+s*v+n*b-o*l,t[1]=n*P+s*l+o*v-a*b,t[2]=o*P+s*b+a*l-n*v,t[3]=s*P-a*v-n*l-o*b,t[4]=a*x+s*u+n*i-o*p+c*P+M*v+f*b-h*l,t[5]=n*x+s*p+o*u-a*i+f*P+M*l+h*v-c*b,t[6]=o*x+s*i+a*p-n*u+h*P+M*b+c*l-f*v,t[7]=s*x-a*u-n*p-o*i+M*P-c*v-f*l-h*b,t}exports.setReal=b;var Y=L;function T(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}exports.mul=Y;var j=r.dot;function _(t,r,e,a){var n=1-a;return j(r,e)<0&&(a=-a),t[0]=r[0]*n+e[0]*a,t[1]=r[1]*n+e[1]*a,t[2]=r[2]*n+e[2]*a,t[3]=r[3]*n+e[3]*a,t[4]=r[4]*n+e[4]*a,t[5]=r[5]*n+e[5]*a,t[6]=r[6]*n+e[6]*a,t[7]=r[7]*n+e[7]*a,t}function I(t,r){var e=D(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function N(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}exports.dot=j;var S=r.length;exports.length=S;var w=S;exports.len=w;var D=r.squaredLength;exports.squaredLength=D;var B=D;function Q(t,r){var e=D(r);if(e>0){e=Math.sqrt(e);var a=r[0]/e,n=r[1]/e,o=r[2]/e,s=r[3]/e,u=r[4],p=r[5],i=r[6],x=r[7],c=a*u+n*p+o*i+s*x;t[0]=a,t[1]=n,t[2]=o,t[3]=s,t[4]=(u-a*c)/e,t[5]=(p-n*c)/e,t[6]=(i-o*c)/e,t[7]=(x-s*c)/e}return t}function V(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function X(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function Z(r,e){var a=r[0],n=r[1],o=r[2],s=r[3],u=r[4],p=r[5],i=r[6],x=r[7],c=e[0],f=e[1],h=e[2],M=e[3],v=e[4],l=e[5],b=e[6],P=e[7];return Math.abs(a-c)<=t.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(n-f)<=t.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-h)<=t.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-M)<=t.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-v)<=t.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(p-l)<=t.EPSILON*Math.max(1,Math.abs(p),Math.abs(l))&&Math.abs(i-b)<=t.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(x-P)<=t.EPSILON*Math.max(1,Math.abs(x),Math.abs(P))}exports.sqrLen=B;
},{"./common.js":"XJqx","./quat.js":"1KdR","./mat4.js":"w3aR"}],"XSo1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.clone=n,exports.fromValues=o,exports.copy=a,exports.set=s,exports.add=u,exports.subtract=i,exports.multiply=c,exports.divide=p,exports.ceil=x,exports.floor=f,exports.min=v,exports.max=h,exports.round=M,exports.scale=l,exports.scaleAndAdd=d,exports.distance=m,exports.squaredDistance=b,exports.length=q,exports.squaredLength=P,exports.negate=A,exports.inverse=O,exports.normalize=y,exports.dot=g,exports.cross=E,exports.lerp=R,exports.random=Y,exports.transformMat2=_,exports.transformMat2d=j,exports.transformMat3=w,exports.transformMat4=D,exports.rotate=L,exports.angle=I,exports.zero=T,exports.str=N,exports.exactEquals=z,exports.equals=S,exports.forEach=exports.sqrLen=exports.sqrDist=exports.dist=exports.div=exports.mul=exports.sub=exports.len=void 0;var r=t(require("./common.js"));function t(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(r,e):{};n.get||n.set?Object.defineProperty(t,e,n):t[e]=r[e]}return t.default=r,t}function e(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function n(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function a(r,t){return r[0]=t[0],r[1]=t[1],r}function s(r,t,e){return r[0]=t,r[1]=e,r}function u(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r}function i(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r}function c(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[1],r}function p(r,t,e){return r[0]=t[0]/e[0],r[1]=t[1]/e[1],r}function x(r,t){return r[0]=Math.ceil(t[0]),r[1]=Math.ceil(t[1]),r}function f(r,t){return r[0]=Math.floor(t[0]),r[1]=Math.floor(t[1]),r}function v(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r}function h(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r}function M(r,t){return r[0]=Math.round(t[0]),r[1]=Math.round(t[1]),r}function l(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r}function d(r,t,e,n){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function m(r,t){var e=t[0]-r[0],n=t[1]-r[1];return Math.sqrt(e*e+n*n)}function b(r,t){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function q(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)}function P(r){var t=r[0],e=r[1];return t*t+e*e}function A(r,t){return r[0]=-t[0],r[1]=-t[1],r}function O(r,t){return r[0]=1/t[0],r[1]=1/t[1],r}function y(r,t){var e=t[0],n=t[1],o=e*e+n*n;return o>0&&(o=1/Math.sqrt(o)),r[0]=t[0]*o,r[1]=t[1]*o,r}function g(r,t){return r[0]*t[0]+r[1]*t[1]}function E(r,t,e){var n=t[0]*e[1]-t[1]*e[0];return r[0]=r[1]=0,r[2]=n,r}function R(r,t,e,n){var o=t[0],a=t[1];return r[0]=o+n*(e[0]-o),r[1]=a+n*(e[1]-a),r}function Y(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function _(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o,r[1]=e[1]*n+e[3]*o,r}function j(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[2]*o+e[4],r[1]=e[1]*n+e[3]*o+e[5],r}function w(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[3]*o+e[6],r[1]=e[1]*n+e[4]*o+e[7],r}function D(r,t,e){var n=t[0],o=t[1];return r[0]=e[0]*n+e[4]*o+e[12],r[1]=e[1]*n+e[5]*o+e[13],r}function L(r,t,e,n){var o=t[0]-e[0],a=t[1]-e[1],s=Math.sin(n),u=Math.cos(n);return r[0]=o*u-a*s+e[0],r[1]=o*s+a*u+e[1],r}function I(r,t){var e=r[0],n=r[1],o=t[0],a=t[1],s=e*e+n*n;s>0&&(s=1/Math.sqrt(s));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var i=(e*o+n*a)*s*u;return i>1?0:i<-1?Math.PI:Math.acos(i)}function T(r){return r[0]=0,r[1]=0,r}function N(r){return"vec2("+r[0]+", "+r[1]+")"}function z(r,t){return r[0]===t[0]&&r[1]===t[1]}function S(t,e){var n=t[0],o=t[1],a=e[0],s=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))}var F=q;exports.len=F;var V=i;exports.sub=V;var k=c;exports.mul=k;var B=p;exports.div=B;var C=m;exports.dist=C;var G=b;exports.sqrDist=G;var H=P;exports.sqrLen=H;var J=function(){var r=e();return function(t,e,n,o,a,s){var u,i;for(e||(e=2),n||(n=0),i=o?Math.min(o*e+n,t.length):t.length,u=n;u<i;u+=e)r[0]=t[u],r[1]=t[u+1],a(r,r,s),t[u]=r[0],t[u+1]=r[1];return t}}();exports.forEach=J;
},{"./common.js":"XJqx"}],"IF0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vec4=exports.vec3=exports.vec2=exports.quat2=exports.quat=exports.mat4=exports.mat3=exports.mat2d=exports.mat2=exports.glMatrix=void 0;var e=x(require("./common.js"));exports.glMatrix=e;var r=x(require("./mat2.js"));exports.mat2=r;var t=x(require("./mat2d.js"));exports.mat2d=t;var s=x(require("./mat3.js"));exports.mat3=s;var o=x(require("./mat4.js"));exports.mat4=o;var a=x(require("./quat.js"));exports.quat=a;var p=x(require("./quat2.js"));exports.quat2=p;var u=x(require("./vec2.js"));exports.vec2=u;var i=x(require("./vec3.js"));exports.vec3=i;var v=x(require("./vec4.js"));function x(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};s.get||s.set?Object.defineProperty(r,t,s):r[t]=e[t]}return r.default=e,r}exports.vec4=v;
},{"./common.js":"XJqx","./mat2.js":"eN7R","./mat2d.js":"M21d","./mat3.js":"vtQf","./mat4.js":"w3aR","./quat.js":"1KdR","./quat2.js":"6buG","./vec2.js":"XSo1","./vec3.js":"AWBd","./vec4.js":"9+zW"}],"ayzy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transform=exports.Raycast=exports.Vec=void 0;var t=require("gl-matrix");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?o(t):n}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||!l(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,p(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,t)})(t)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t,e,n){return(f=s()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&y(o,n.prototype),o}).apply(null,arguments)}function l(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(e){function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return n(this,o),(t=r(this,p(o).call(this)))[0]=e,t[1]=i,t[2]=u,t[3]=c,1===arguments.length&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}return c(o,a(Array)),u(o,[{key:"valueOf",value:function(){return"".concat(this[0].toFixed(2),"; ").concat(this[1].toFixed(2),"; ").concat(this[2].toFixed(2))}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=t}}],[{key:"avg",value:function(t,e){return new o((e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2)}},{key:"normal",value:function(e,n){var r=new o,i=new o;t.vec3.normalize(r,e),t.vec3.normalize(i,n);var u=new o;return t.vec3.cross(u,r,i),u}},{key:"divide",value:function(t,e){return new o(t[0]/e[0],t[1]/e[1],t[2]/e[2])}},{key:"add",value:function(t,e){return new o(t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3])}},{key:"subtract",value:function(t,e){return new o(t[0]-e[0],t[1]-e[1],t[2]-e[2],t[3]-e[3])}},{key:"multiply",value:function(t,e){return new o(t[0]*e[0],t[1]*e[1],t[2]*e[2],t[3]*e[3])}}]),u(o,[{key:"add",value:function(t){return o.add(this,t)}},{key:"multiply",value:function(t){return o.multiply(this,t)}},{key:"divide",value:function(t){return o.divide(this,t)}},{key:"subtract",value:function(t){return o.subtract(this,t)}},{key:"dot",value:function(e){return t.vec3.dot(this,e)}},{key:"normalize",value:function(){return t.vec3.normalize(this,this),this}}]),o}();exports.Vec=v;var h=function(e){function o(t,e,i){var u;n(this,o),u=r(this,p(o).call(this));var c=t.worldPosition,a=t.sensor.width,s=t.sensor.height;return u.origin=new v(c.x,c.y,c.z),u[0]=2*e/a-1,u[1]=1-2*i/s,u[2]=1,u[3]=1,u.project(t.projMatrix,t.viewMatrix),u}return c(o,v),u(o,[{key:"project",value:function(e,n){var r=t.mat4.create();t.mat4.invert(r,e),t.vec4.transformMat4(this,this,r);var o=t.mat4.create();t.mat4.invert(o,n),t.vec4.transformMat4(this,this,o),t.vec4.normalize(this,this)}},{key:"distnace",value:function(t,e){return-this.origin.add(t).dot(e)/this.dot(e)}},{key:"hit",value:function(t,e){var n=this.distnace(t,e),r=this.origin.add(this.multiply(new v(n,n,n)));return n>0&&n<1e5?{distance:n,position:r}:null}}]),o}();exports.Raycast=h;var d=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.position,o=void 0===r?new v:r,i=e.rotation,u=void 0===i?new v:i,c=e.origin,a=void 0===c?new v:c,s=e.scale,f=void 0===s?1:s;n(this,t),this.position=new v(o),this.rotation=new v(u),this.scale=f,this.origin=new v(a)};exports.Transform=d;
},{"gl-matrix":"IF0X"}],"oIOy":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Texture=void 0;var n=function(){function t(i){e(this,t),this.gltexture=null,this.image=i||null,this.textureScale=1,this.animated=!1,this.animated=i&&"video"===i.localName||!1}return i(t,[{key:"image",get:function(){return this.img},set:function(e){this.img=e}},{key:"width",get:function(){return this.image.width}},{key:"height",get:function(){return this.image.height}}]),t}();exports.Texture=n;
},{}],"9euP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Material=void 0;var e=require("./Texture");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function s(i){t(this,s),this.name=i,this.texture=new e.Texture,this.reflectionMap=new e.Texture,this.displacementMap=new e.Texture,this.diffuseColor=[1,1,1],this.transparency=0,this.reflection=0,this.textureScale=1,this.receiveShadows=!0,this.castShadows=!0,this.scaleUniform=!1,s[this.name]=this.constructor};exports.Material=s;
},{"./Texture":"oIOy"}],"vwKi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./Material");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?n(t):o}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(e){function n(){var t;return o(this,n),(t=r(this,u(n).call(this,"DEFAULT"))).diffuseColor=[1,1,1],t.receiveShadows=!0,t.castShadows=!0,t}return i(n,t.Material),n}();exports.default=f;
},{"./Material":"9euP"}],"27B5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Geometry=void 0;var e=require("../Math.js"),t=r(require("../materials/DefaultMaterial.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=new t.default,b=function(t){function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,r),(e=i(this,s(r).call(this,t))).onCreate(t);var n=t.material,u=void 0===n?y:n,a=t.hidden,f=void 0!==a&&a,c=t.guide,l=void 0!==c&&c,b=t.drawmode,h=void 0===b?"TRIANGLES":b,v=t.uv,d=void 0===v?[0,0]:v;return e.vertArray=t.vertecies,e.material=u,e.hidden=f,e.guide=l,e.uv=d,e.drawmode=h,e}return c(r,e.Transform),f(r,[{key:"buffer",get:function(){return this._buffer=this._buffer||this.createBuffer(),this._buffer}},{key:"vertecies",get:function(){return this.vertArray||[]}},{key:"indecies",get:function(){return[]}}],[{key:"attributes",get:function(){return[{size:3,attribute:"aPosition"},{size:2,attribute:"aTexCoords"},{size:3,attribute:"aNormal"}]}}]),f(r,[{key:"onSelect",value:function(e){console.log(e)}},{key:"onCreate",value:function(e){}},{key:"createBuffer",value:function(){return new h(this.vertecies,this.indecies,this.constructor.attributes,this.drawmode)}}]),r}();exports.Geometry=b;var h=function(){function e(t,r,n,i){o(this,e),this.vertecies=new Float32Array(t),this.indecies=new Uint16Array(r),this.attributes=n,this.type=i||"TRIANGLES"}return f(e,[{key:"vertsPerElement",get:function(){return this.vertecies.length/this.elements}},{key:"elements",get:function(){var e=0;for(var t in this.attributes)e+=this.attributes[t].size;return e}}]),e}();
},{"../Math.js":"ayzy","../materials/DefaultMaterial.js":"vwKi"}],"0Jjv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Camera=void 0;var t=require("gl-matrix"),e=require("../Math.js"),o=require("../scene/Geometry"),r=i(require("../materials/DefaultMaterial.js"));function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?l(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,o){return e&&c(t.prototype,e),o&&c(t,o),t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=new r.default,v=function(r){function i(){var o,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,i);var n=r.fov,c=void 0===n?50:n,f=r.scale,p=void 0===f?.004:f,h=r.farplane,y=void 0===h?350:h,v=r.nearplane,m=void 0===v?.025:v,b=r.width,d=void 0===b?1280:b,w=r.height,x=void 0===w?720:w;(o=s(this,u(i).call(this,r))).scale=p,o.fov=c,o.farplane=y,o.nearplane=m,o.lookAt=new e.Vec(0,0,0),o.projMatrix=t.mat4.create(),o.viewMatrix=t.mat4.create(),o.projViewMatrix=t.mat4.create(),o.sensor={width:d,height:x},o.update();var g=l(o);return o.worldPosition={get x(){return-g.position.x},get y(){return-g.position.y},get z(){return-g.position.z}},o}return p(i,o.Geometry),f(i,[{key:"onCreate",value:function(t){t.drawmode="LINE_STRIP",t.material=y}},{key:"attributes",get:function(){return[{size:3,attribute:"aPosition"},{size:2,attribute:"aTexCoords"}]}},{key:"vertecies",get:function(){var t=50/this.scale;return[-t,-t,0,0,0,t,-t,0,1,0,t,t,0,1,1,t,t,0,1,1,-t,t,0,0,1,-t,-t,0,0,0,t,t,0,1,1,t,t,2*t,1,1,-t,-t,2*t,0,0,t,-t,2*t,1,0,t,t,2*t,1,1,t,t,2*t,1,1,-t,t,2*t,0,1,-t,-t,2*t,0,0,-t/2,-t/2,-t,0,0,t/2,-t/2,-t,1,0,t/2,t/2,-t,1,1,t/2,t/2,-t,1,1,-t/2,t/2,-t,0,1,-t/2,-t/2,-t,0,0]}}]),f(i,[{key:"setPositionTo",value:function(t){this.position=t.position,this.rotation=t.rotation}},{key:"zoom",value:function(t){this.position.z+=-100*Math.sign(t),this.update()}},{key:"update",value:function(){var e=this.projMatrix,o=this.viewMatrix,r=this.sensor.width/this.sensor.height;t.mat4.perspective(e,Math.PI/180*this.fov,r,this.nearplane,this.farplane),t.mat4.lookAt(o,t.vec3.fromValues(0,0,0),t.vec3.fromValues(this.lookAt.x,this.lookAt.y,this.lookAt.z),t.vec3.fromValues(0,1,0)),t.mat4.scale(o,o,t.vec3.fromValues(this.scale,this.scale,this.scale)),t.mat4.translate(o,o,this.position),t.mat4.rotateX(o,o,Math.PI/180*this.rotation.x),t.mat4.rotateY(o,o,Math.PI/180*this.rotation.y),t.mat4.multiply(this.projViewMatrix,this.projMatrix,this.viewMatrix)}}]),i}();exports.Camera=v;
},{"gl-matrix":"IF0X","../Math.js":"ayzy","../scene/Geometry":"27B5","../materials/DefaultMaterial.js":"vwKi"}],"5ncX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FirstPersonCamera=void 0;var t=require("gl-matrix"),e=require("./Camera");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(r){function n(){return o(this,n),a(this,u(n).apply(this,arguments))}return c(n,e.Camera),i(n,[{key:"update",value:function(){var e=this.projMatrix,r=this.viewMatrix,o=this.sensor.width/this.sensor.height;t.mat4.perspective(e,Math.PI/180*this.fov,o,this.nearplane,this.farplane),t.mat4.lookAt(r,t.vec3.fromValues(0,0,0),this.lookAt,t.vec3.fromValues(0,1,0)),t.mat4.rotateX(r,r,this.rotation.x),t.mat4.rotateY(r,r,this.rotation.y),t.mat4.scale(r,r,t.vec3.fromValues(this.scale,this.scale,this.scale)),t.mat4.translate(r,r,this.position),t.mat4.multiply(this.projViewMatrix,this.projMatrix,this.viewMatrix)}}]),n}();exports.FirstPersonCamera=l;
},{"gl-matrix":"IF0X","./Camera":"0Jjv"}],"97xH":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityControler=void 0;var o=function(){function t(n){if(e(this,t),!n)throw"No controllable entity";this.locked=!1,this.entity=n}return n(t,[{key:"update",value:function(){}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}}]),t}();exports.EntityControler=o;
},{}],"tekt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FirstPersonControler=void 0;var t=require("./EntityControler");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(e){function i(t,e){var s;o(this,i),s=n(this,r(i).call(this,t));var u=t.update.bind(t);return t.update=function(t){s.checkControls(),u(t)},s.viewport=e,s.initMouse(),s.initKeyboard(),s.sensivity=.0033,s.speed=20,s}return c(i,t.EntityControler),u(i,[{key:"up",value:function(){this.entity.position.y-=this.speed}},{key:"down",value:function(){this.entity.position.y+=this.speed}},{key:"move",value:function(t){var e=this.entity,o=this.speed*t,n=-e.rotation.y,i=-e.rotation.x;e.position.x+=o*Math.sin(n),e.position.z+=o*Math.cos(n),e.position.y-=o*Math.sin(i)}},{key:"strafe",value:function(t){var e=this.entity,o=this.speed*t,n=e.rotation.y;e.position.z+=o*Math.sin(n),e.position.x+=o*Math.cos(n)}},{key:"checkControls",value:function(){this.checkKey("w")&&this.move(1),this.checkKey("s")&&this.move(-1),this.checkKey("a")&&this.strafe(1),this.checkKey("d")&&this.strafe(-1),this.checkKey("q")&&this.up(),this.checkKey("y")&&this.down()}}]),u(i,[{key:"initMouse",value:function(){var t=this,e=this.entity;this.viewport.addEventListener("mousedown",function(e){t.locked||t.viewport.requestPointerLock()}),this.viewport.addEventListener("mousemove",function(o){null!=document.pointerLockElement&&(e.rotation.y+=o.movementX*t.sensivity,e.rotation.x+=o.movementY*t.sensivity,e.rotation.x=e.rotation.x%(2*Math.PI),e.rotation.y=e.rotation.y%(2*Math.PI),e.rotation.z=e.rotation.z%(2*Math.PI),e.rotation.x=Math.max(Math.min(e.rotation.x,1.5),-1.5)),t.locked&&document.exitPointerLock()})}},{key:"initKeyboard",value:function(){var t=this;this.keyMap=new Map,window.addEventListener("keydown",function(e){null!=document.pointerLockElement&&t.keyMap.set(e.key,!0)}),window.addEventListener("keyup",function(e){t.keyMap.delete(e.key)})}},{key:"checkKey",value:function(t){return this.keyMap.has(t)}}]),i}();exports.FirstPersonControler=y;
},{"./EntityControler":"97xH"}],"sIFr":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function r(){e(this,r),this.vertecies=[],this.uvs=[],this.faces=[],this.normals=[]}return t(r,null,[{key:"parseFile",value:function(e){var t=e.split(/\n/g),n=new r,a=!0,i=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var o=s.value.split(" "),c=o[0],f=[];switch(c){case"v":f=o.slice(1),n.vertecies.push([+f[0],+f[1],+f[2]]);break;case"vt":f=o.slice(1),n.uvs.push([+f[0],+f[1]]);break;case"vn":f=o.slice(1),n.normals.push([+f[0],+f[1],+f[2]]);break;case"f":f=o.slice(1);var v=[],p=!0,h=!1,y=void 0;try{for(var b,d=f[Symbol.iterator]();!(p=(b=d.next()).done);p=!0){var m=b.value;v.push(m.split("/").map(function(e){return parseInt(e)}))}}catch(w){h=!0,y=w}finally{try{p||null==d.return||d.return()}finally{if(h)throw y}}n.faces.push(v)}}}catch(w){i=!0,l=w}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}return n}}]),r}();exports.default=n;
},{}],"FwQv":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Resources=void 0;var e=n(require("./resources/OBJFile.js"));function n(e){return e&&e.__esModule?e:{default:e}}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),e}var a={initLoaded:!1,resourceTypes:{JSON:[".json"],TEXT:[".txt"],IMAGE:[".png",".jpg"],VIDEO:[".mp4"],SHADER:[".shader",".fs",".vs"],GEOMETRY:[".obj"]}};a.queue=new Set,a.map=new Map;var o=function(){function n(){t(this,n)}return u(n,null,[{key:"add",value:function(e,t){for(var r in e)a.queue.add({name:r,path:e[r]});if(!0===t)return n.load()}},{key:"map",value:function(){return a.map}},{key:"get",value:function(e){return a.map.get(e)}},{key:"load",value:function(){var e=[],t=!0,r=!1,u=void 0;try{for(var o,i=function(){var t=o.value,r=n._fetch(t.path).then(function(e){var n=t;a.map.set(n.name,e)});e.push(r)},c=a.queue[Symbol.iterator]();!(t=(o=c.next()).done);t=!0)i()}catch(s){r=!0,u=s}finally{try{t||null==c.return||c.return()}finally{if(r)throw u}}return Promise.all(e).then(function(){a.queue.clear(),!a.initLoaded&&n.finished&&(a.initLoaded=!0)})}},{key:"_fetch",value:function(t){var r=null;for(var u in n.Types){var a=!0,o=!1,i=void 0;try{for(var c,s=n.Types[u][Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var l=c.value;t.match(l)&&(r=n.Types[u])}}catch(f){o=!0,i=f}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}}switch(r){case n.Types.JSON:return fetch(t).then(function(e){return e.json().catch(function(e){console.error("File failed parsing:",t)})});case n.Types.IMAGE:return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.src=t});case n.Types.VIDEO:return new Promise(function(e,n){var r=document.createElement("video");r.oncanplay=function(){r.width=1024,r.height=1024,r.loop=!0,r.play(),e(r)},r.src=t});case n.Types.GEOMETRY:return fetch(t).then(function(n){return n.text().then(function(n){return e.default.parseFile(n)})});case n.Types.TEXT:case n.Types.SHADER:return fetch(t).then(function(e){return e.text()});default:throw'Err: not a valid resource type: "'.concat(t,'"')}}},{key:"Types",get:function(){return a.resourceTypes}},{key:"finished",get:function(){return 0===a.queue.size}}]),n}();exports.Resources=o;
},{"./resources/OBJFile.js":"sIFr"}],"7m5u":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Logger=void 0;var r=new Map,i=function(){function e(n){t(this,e),this.prefix=n,r.set(n,[]),this.style={prefix:"\n                background: #1c1c1c;\n                color: rgba(255, 255, 255, 0.65);\n                font-weight: 600;\n                padding: 2px 6px;\n                border-radius: 4px;\n                margin-right: 5px;\n            ",text:"\n                background: #333;\n                color: #eee;\n                padding: 2px 6px;\n            ",attr:"\n                background: #3f3f3f;\n                color: #eee;\n                padding: 2px 6px;\n                font-style: italic;\n            "}}return n(e,null,[{key:"listen",value:function(t,e){var n=r.get(t);n&&n.push(e)}},{key:"dispatch",value:function(t,e){var n=r.get(t);if(n){var i=!0,o=!1,a=void 0;try{for(var c,l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){(0,c.value)(e)}}catch(s){o=!0,a=s}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}}}]),n(e,[{key:"out",value:function(t,n,r){r?console[t]("%c".concat(this.prefix,"%c").concat(n,"%c").concat(r),this.style.prefix,this.style.text,this.style.attr):console[t]("%c".concat(this.prefix,"%c").concat(n),this.style.prefix,this.style.text),e.dispatch(this.prefix,{style:this.style,prefix:this.prefix,text:n})}},{key:"log",value:function(t,e){this.out("info",t,e)}},{key:"error",value:function(t,e){this.out("error",t,e)}}]),e}();exports.Logger=i;
},{}],"2jOf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=void 0;var e=require("./materials/Material"),r=require("./Resources"),t=require("./materials/Texture"),a=require("./Logger");function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var u=new a.Logger("Loader"),c=function(){function a(){n(this,a)}return i(a,null,[{key:"loadObjFile",value:function(e){var r=[];return e.faces.forEach(function(t,a){for(var n=0;n<3;n++){var o=t[n],i=e.vertecies[o[0]-1],u=e.uvs[o[1]-1],c=e.normals[o[2]-1];i&&u&&c&&r.push(i[0],i[1],i[2],u[0],u[1],c[0],c[1],c[2])}}),r}},{key:"createMatFromJson",value:function(a,n){var o=new e.Material(a);if(Object.assign(o,n),n.texture){var i=r.Resources.get(n.texture),c=new t.Texture(i);o.texture=c,i||u.error("could not find texture on Material",a)}if(n.reflectionMap){var l=r.Resources.get(n.reflectionMap),s=new t.Texture(l);o.reflectionMap=s,l||u.error("could not find reflectionMap on Material",a)}if(n.displacementMap){var f=r.Resources.get(n.displacementMap),p=new t.Texture(f);o.displacementMap=p,f||u.error("could not find displacementMap on Material",a)}return o}}]),a}();exports.Loader=c;
},{"./materials/Material":"9euP","./Resources":"FwQv","./materials/Texture":"oIOy","./Logger":"7m5u"}],"5vRv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Plane=void 0;var e=require("../scene/Geometry.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function u(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?i(e):n}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(t){function o(){return n(this,o),u(this,c(o).apply(this,arguments))}return f(o,e.Geometry),r(o,[{key:"onCreate",value:function(e){e.drawmoed="TRIANGLES"}},{key:"vertecies",get:function(){return[-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,1,1,0,1,1,-1,1,0,0,1,-1,-1,0,0,0]}}],[{key:"attributes",get:function(){return[{size:3,attribute:"aPosition"},{size:2,attribute:"aTexCoords"}]}}]),o}();exports.Plane=s;
},{"../scene/Geometry.js":"27B5"}],"JxnF":[function(require,module,exports) {
"use strict";function r(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function t(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.GLShader=void 0;var n=function(){function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).name;r(this,e),this.name=t,this.program=null,this.initialized=!1}return t(e,[{key:"vertexShader",get:function(){return this._vertShader}},{key:"fragementShader",get:function(){return this._fragShader}},{key:"uniforms",get:function(){return this._uniforms}},{key:"attributes",get:function(){return this._attributes}},{key:"uniform",get:function(){return{}}},{key:"src",get:function(){return this.constructor.source}}]),t(e,[{key:"setUniforms",value:function(r){var e=this.uniforms;if(e)for(var t in this.uniform){var n=this.uniform[t];if("integer"===t)for(var i in this.uniform.integer)r.uniform1i(e[i],this.uniform.integer[i]);Array.isArray(n)?r.uniform3fv(e[t],n):r.uniform1f(e[t],n)}}}]),e}();exports.GLShader=n;
},{}],"tYIj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GLContext=void 0;var e=require("gl-matrix"),t=require("../Math.js"),r=require("../shader/GLShader");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var n=function(){function i(e){if(a(this,i),!e)throw"GLContext: Err: no canvas";for(var t in this.currentShader=null,this.framebuffers=new Map,this.bufferTextures=new Map,this.shaders=new Map,this.options={DEPTH_TEST:!0,CULL_FACE:!0,BLEND:!0},this.getContext(e),this.onCreate(),this.options)!0===this.options[t]&&this.gl.enable(this.gl[t])}return u(i,[{key:"onCreate",value:function(){}},{key:"enable",value:function(e){this.gl.enable(e)}},{key:"disable",value:function(e){this.gl.disable(e)}},{key:"width",get:function(){return this.gl.canvas.width}},{key:"height",get:function(){return this.gl.canvas.height}},{key:"aspectratio",get:function(){return this.width/this.height}}]),u(i,[{key:"viewport",value:function(e,t){this.gl.viewport(0,0,e,t)}},{key:"setResolution",value:function(e,t){this.gl.canvas.width=e,this.gl.canvas.height=t,this.viewport(this.width,this.height)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"getContext",value:function(e){this.canvas=e;var t={};this.gl=e.getContext("webgl2",t)||e.getContext("webgl",t),this.gl.cullFace(this.gl.BACK),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"useShader",value:function(e){this.gl.useProgram(e.program),e.setUniforms(this.gl),this.currentShader=e}},{key:"useTexture",value:function(e,t,r){t&&null!=r?(this.gl.activeTexture(this.gl["TEXTURE"+r]),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(this.currentShader.uniforms[t],r)):this.gl.bindTexture(this.gl.TEXTURE_2D,e)}},{key:"useFramebuffer",value:function(e){this.framebuffers.has(e)?this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.framebuffers.get(e)):console.error("Err:",e,"framebuffer not found")}},{key:"clearFramebuffer",value:function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"getBufferTexture",value:function(e){return this.bufferTextures.get(e)}},{key:"prepareShader",value:function(e){var t=this.gl;if(e instanceof r.GLShader)return e.src&&(e._vertShader=this.compileShader(e.src[0],t.VERTEX_SHADER),e._fragShader=this.compileShader(e.src[1],t.FRAGMENT_SHADER),e.program=this.createProgram(e._vertShader,e._fragShader),e._uniforms=this.getUniforms(e.program),e._attributes=this.getAttributes(e.program),e.initialized=!0),this.shaders.set(e.name,e),e.program}},{key:"getAttributes",value:function(e){for(var t=this.gl,r={},a=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<a;++i){var u=t.getActiveAttrib(e,i).name;r[u]=t.getAttribLocation(e,u)}return r}},{key:"getUniforms",value:function(e){for(var t=this.gl,r={},a=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<a;++i){var u=t.getActiveUniform(e,i).name;r[u]=t.getUniformLocation(e,u)}return r}},{key:"compileShader",value:function(e,t){var r=this.gl,a=r.createShader(t);if(r.shaderSource(a,e),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))throw console.error(e),new Error(r.getShaderInfoLog(a));return a}},{key:"useVAO",value:function(e){this.gl.bindVertexArray(e)}},{key:"createVAO",value:function(){var e=this.gl.createVertexArray();return this.gl.bindVertexArray(e),e}},{key:"createFramebuffer",value:function(e,t,r){var a=this,i=this.gl,u=this.gl.createFramebuffer();return i.bindFramebuffer(i.FRAMEBUFFER,u),{colorbuffer:function(){var n=a.createBufferTexture(t,r);a.useTexture(n),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,n,0);var s=a.createDepthTexture(t,r);a.useTexture(s),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,s,0),i.bindFramebuffer(i.FRAMEBUFFER,null),a.useTexture(null),a.bufferTextures.set("depth",s),a.bufferTextures.set(e,n),a.framebuffers.set(e,u)},depthbuffer:function(){var n=a.createDepthTexture(t,r);a.useTexture(n),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,n,0),i.bindFramebuffer(i.FRAMEBUFFER,null),a.useTexture(null),a.bufferTextures.set(e,n),a.framebuffers.set(e,u)}}}},{key:"createProgram",value:function(e,t){var r=this.gl,a=r.createProgram();if(r.attachShader(a,e),r.attachShader(a,t),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw new Error(r.getProgramInfoLog(a));return a}},{key:"createDepthTexture",value:function(e,t){var r=this.gl,a=r.createTexture();return r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texImage2D(r.TEXTURE_2D,0,r.DEPTH_COMPONENT24,e,t,0,r.DEPTH_COMPONENT,r.UNSIGNED_INT,null),r.bindTexture(r.TEXTURE_2D,null),a}},{key:"createBufferTexture",value:function(e,t){var r=this.gl,a=r.createTexture();return r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),a}},{key:"updateTexture",value:function(e,t){var r=this.gl;r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t.width,t.height,0,r.RGBA,r.UNSIGNED_BYTE,t),r.bindTexture(r.TEXTURE_2D,null)}},{key:"createTexture",value:function(e){var t=this.gl,r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),e?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,1,1,0,t.LUMINANCE,t.UNSIGNED_BYTE,new Uint8Array([0])),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.bindTexture(t.TEXTURE_2D,null),r}},{key:"setGeoTransformUniforms",value:function(r){var a=this.currentShader.uniforms;r.modelMatrix=r.modelMatrix||e.mat4.create();var i=r.modelMatrix,u=t.Vec.add(r.position,r.origin),n=r.rotation,s=r.scale;e.mat4.identity(i),e.mat4.translate(i,i,u),e.mat4.rotateX(i,i,n.x),e.mat4.rotateY(i,i,n.y),e.mat4.rotateZ(i,i,n.z),e.mat4.scale(i,i,e.vec3.fromValues(s,s,s)),this.gl.uniformMatrix4fv(a.uModelMatrix,!1,i)}},{key:"initializeBuffersAndAttributes",value:function(e){var t=this.gl,r=this.currentShader.attributes;if(!(e.vertecies.length<1)){!e.indexBuffer||!e.vertexBuffer?(e.indexBuffer=t.createBuffer(),e.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indecies,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.vertecies,t.STATIC_DRAW)):(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,e.vertexBuffer));for(var a=e.vertecies.BYTES_PER_ELEMENT,i=0,u=e.attributes,n=0;n<e.attributes.length;n++)t.vertexAttribPointer(r[u[n].attribute],u[n].size,t.FLOAT,!1,e.elements*a,i*a),t.enableVertexAttribArray(r[u[n].attribute]),i+=u[n].size}}}]),i}();exports.GLContext=n;
},{"gl-matrix":"IF0X","../Math.js":"ayzy","../shader/GLShader":"JxnF"}],"O6rd":[function(require,module,exports) {
module.exports="/comp.fragment.9b75a7a7.shader";
},{}],"hZdr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./GLShader.js"),t=require("../Resources.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,o){return t&&c(e.prototype,t),o&&c(e,o),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}t.Resources.add({"comp.fs":require("../../res/shader/comp.fragment.shader")},!1);var l=function(o){function i(){return n(this,i),r(this,u(i).call(this,{name:"final"}))}return s(i,e.GLShader),f(i,null,[{key:"source",get:function(){return["#version 300 es\n\n                layout(location = 0) in vec3 aPosition;\n                layout(location = 1) in vec2 aTexCoords;\n\n                uniform float aspectRatio;\n\n                out vec2 texCoords;\n                \n                void main() {\n                    gl_Position = vec4(aPosition, 1.0);\n                    texCoords = aTexCoords;\n                }\n            ",t.Resources.get("comp.fs")]}}]),i}();exports.default=l;
},{"./GLShader.js":"JxnF","../Resources.js":"FwQv","../../res/shader/comp.fragment.shader":"O6rd"}],"Wk3e":[function(require,module,exports) {
module.exports="/gbuffer.vertex.9c9fdb12.shader";
},{}],"FLMa":[function(require,module,exports) {
module.exports="/color.fragment.e0c95215.shader";
},{}],"A4z7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../Resources.js"),r=require("./GLShader.js");function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?u(e):r}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,r,t){return r&&c(e.prototype,r),t&&c(e,t),e}function s(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&a(e,r)}function a(e,r){return(a=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}e.Resources.add({"gbuffer.vs":require("../../res/shader/gbuffer.vertex.shader"),"color.fs":require("../../res/shader/color.fragment.shader")},!1);var l=function(t){function u(){return o(this,u),n(this,f(u).call(this,{name:"color"}))}return s(u,r.GLShader),i(u,null,[{key:"source",get:function(){return[e.Resources.get("gbuffer.vs"),e.Resources.get("color.fs")]}}]),u}();exports.default=l;
},{"../Resources.js":"FwQv","./GLShader.js":"JxnF","../../res/shader/gbuffer.vertex.shader":"Wk3e","../../res/shader/color.fragment.shader":"FLMa"}],"nHaZ":[function(require,module,exports) {
module.exports="/light.fragment.2ba291d1.shader";
},{}],"OGcb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../Resources.js"),t=require("./GLShader.js");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}e.Resources.add({"gbuffer.vs":require("../../res/shader/gbuffer.vertex.shader"),"light.fs":require("../../res/shader/light.fragment.shader")},!1);var l=function(r){function u(){var e;return o(this,u),(e=n(this,i(u).call(this,{name:"light"}))).ambient=[.75,.75,.75],e.shadowcolor=.15,e}return s(u,t.GLShader),c(u,[{key:"uniform",get:function(){return{uAmbientColor:this.ambient,shadowcolor:this.shadowcolor}}}],[{key:"source",get:function(){return[e.Resources.get("gbuffer.vs"),e.Resources.get("light.fs")]}}]),u}();exports.default=l;
},{"../Resources.js":"FwQv","./GLShader.js":"JxnF","../../res/shader/gbuffer.vertex.shader":"Wk3e","../../res/shader/light.fragment.shader":"nHaZ"}],"6nW3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./GLShader.js");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function t(e,n){return!n||"object"!==o(n)&&"function"!=typeof n?r(e):n}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function a(e,o,n){return o&&u(e.prototype,o),n&&u(e,n),e}function c(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&l(e,o)}function l(e,o){return(l=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}var f=function(o){function r(){return n(this,r),t(this,i(r).call(this,{name:"reflection"}))}return c(r,e.GLShader),a(r,null,[{key:"source",get:function(){return["#version 300 es\n\n            layout(location = 0) in vec3 aPosition;\n            layout(location = 1) in vec2 aTexCoords;\n            layout(location = 2) in vec3 aNormal;\n            \n            uniform mat4 uModelMatrix;\n            uniform mat4 uViewMatrix;\n            uniform mat4 uProjMatrix;\n            \n            uniform float uTime;\n            \n            out vec2 vTexCoords;\n            out vec4 vWorldPos;\n            out vec3 vNormal;\n            \n            void main() {\n                vec4 pos = uModelMatrix * vec4(aPosition, 1.0);\n                pos.y *= -1.0;\n                pos.y += 42.0;\n            \n                vWorldPos = pos;\n                vNormal = aNormal;\n                vTexCoords = aTexCoords;\n            \n                gl_Position = uProjMatrix * uViewMatrix * vec4(pos.xyz, 1.0);\n                gl_PointSize = 5.0;\n            }\n            ","#version 300 es\n            precision mediump float;\n\n            in vec2 vTexCoords;\n            in vec3 vNormal;\n\n            uniform sampler2D colorTexture;\n            uniform sampler2D reflectionMap;\n\n            uniform float textureScale;\n            uniform float transparency;\n            uniform vec3 diffuseColor;\n\n            out vec4 oFragColor;\n\n            void main() {\n                // set diffuse color\n                oFragColor = vec4(diffuseColor, 1.0 - transparency);\n\n                vec2 imageSize = vec2(textureSize(colorTexture, 0));\n                if(imageSize.x > 1.0) {\n                    vec2 textureCoords = vec2(vTexCoords) / (imageSize.x / textureScale);\n\n                    vec4 textureColor = texture(colorTexture, textureCoords);\n                    oFragColor *= textureColor;\n\n                    float reflectivenss = texture(reflectionMap, textureCoords).r;\n                    if(reflectivenss > 0.0) {\n                        discard;\n                    }\n                }\n            }\n            "]}}]),r}();exports.default=f;
},{"./GLShader.js":"JxnF"}],"xS43":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=require("./GLShader.js");function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function t(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function e(n,t){return!t||"object"!==o(t)&&"function"!=typeof t?r(n):t}function r(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function i(n){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n,o){for(var t=0;t<o.length;t++){var e=o[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function a(n,o,t){return o&&u(n.prototype,o),t&&u(n,t),n}function c(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),o&&l(n,o)}function l(n,o){return(l=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(n,o)}var f=function(o){function r(){return t(this,r),e(this,i(r).call(this,{name:"primitive"}))}return c(r,n.GLShader),a(r,null,[{key:"source",get:function(){return["#version 300 es\n\n            layout(std140, column_major) uniform;\n            \n            layout(location = 0) in vec3 aPosition;\n            layout(location = 1) in vec2 aTexCoords;\n            layout(location = 2) in vec3 aNormal;\n            \n            uniform bool scaleUniform;\n            uniform mat4 uModelMatrix;\n            uniform mat4 uViewMatrix;\n            uniform mat4 uProjMatrix;\n            \n            uniform sampler2D displacementMap;\n            \n            out vec3 vColor;\n            \n            void main() {\n                vec4 bump = texture(displacementMap, aTexCoords); // idfk\n\n                float distance = 1.0;\n                if(scaleUniform) {\n                    distance = (uProjMatrix * uViewMatrix * uModelMatrix * vec4(aPosition, 1.0)).z;\n                }\n            \n                gl_Position = uProjMatrix * uViewMatrix * uModelMatrix * vec4(aPosition * distance, 1.0);\n            \n                vColor = aNormal;\n            }\n            ","#version 300 es\n            precision mediump float;\n            \n            in vec3 vColor;\n            \n            out vec4 oFragColor;\n            \n            void main () {\n                oFragColor = vec4(vColor, .75);\n            }\n            "]}}]),r}();exports.default=f;
},{"./GLShader.js":"JxnF"}],"1cqe":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(n){e(this,t),this.name=n}return n(t,[{key:"getValue",value:function(e,t){return e in this||this.define(e,t),this.load(),this[e].value}},{key:"setValue",value:function(e,t){this[e]||this.define(e,t),this[e].value=t,this.save()}},{key:"define",value:function(e,t,n){this[e]=new i(e,t,n)}}],[{key:"global",get:function(){return r}}]),n(t,[{key:"save",value:function(){var e=localStorage.getItem(this.name),t=JSON.parse(e)||{};for(var n in this){var a=this[n].value;null!=a&&(t[n]=a)}localStorage.setItem(this.name,JSON.stringify(t))}},{key:"load",value:function(){var e=localStorage.getItem(this.name),t=JSON.parse(e);for(var n in t)n in this&&(this[n].value=t[n])}}]),t}();exports.default=a;var i=function t(n,a,i){e(this,t),this.name=n,this.default=a,this.value=i||this.default},r=new a("viewport-config");
},{}],"9oJ+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Renderer=void 0;var e=require("../geo/Plane"),t=require("../renderer/GL"),r=h(require("../shader/FinalShader")),i=h(require("../shader/ColorShader")),n=h(require("../shader/LightShader")),s=h(require("../shader/ReflectionShader")),a=h(require("../shader/PrimitiveShader")),o=require("../Logger"),u=h(require("../Config"));function h(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return g(e)||c(e)||d()}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function g(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),e}function v(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=new o.Logger("Renderer"),M=function(o){function h(){return p(this,h),v(this,x(h).apply(this,arguments))}return b(h,t.GLContext),y(h,[{key:"setScene",value:function(e){this.scene=e}},{key:"updateViewport",value:function(){this.scene.activeCamera.sensor={width:this.width,height:this.height},this.scene.activeCamera.update()}},{key:"onCreate",value:function(){this.renderTarget=new e.Plane({material:null}),this.setResolution.apply(this,f(h.defaults.resolution)),this.shadowMapSize=4096,this.renderPasses=[new k(this,"shadow",new i.default,this.aspectratio,this.shadowMapSize,!0),new k(this,"light",new n.default,this.aspectratio,this.width),new k(this,"reflection",new s.default,this.aspectratio,this.width),new k(this,"diffuse",new i.default,this.aspectratio,this.width),new k(this,"guides",new a.default,this.aspectratio,this.width)],this.compShader=new r.default,this.prepareShader(this.compShader),this.readings={},T.log("Resolution set to ".concat(this.width,"x").concat(this.height))}},{key:"draw",value:function(){if(this.scene){var e=performance.now(),t=!0,r=!1,i=void 0;try{for(var n,s=this.scene.objects[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var a=n.value;a.material&&a.material.animated&&this.updateTexture(a.material.texture.gltexture,a.material.texture.image)}}catch(o){r=!0,i=o}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}this.renderMultiPasses(this.renderPasses),this.compositePasses(this.renderPasses),this.lastFrameTime&&(this.frameTime=e-this.lastFrameTime),this.lastFrameTime=e}}},{key:"renderMultiPasses",value:function(e){var t=this.gl,r=this.scene.activeCamera,i=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var u=a.value,h=this.scene.lightSources,l=t.isEnabled(t.CULL_FACE);switch(u.id){case"shadow":u.use(),this.drawScene(this.scene,h,function(e){return e.material&&e.material.castShadows});break;case"light":u.use(),this.useTexture(this.getBufferTexture("shadow"),"shadowDepthMap",0),t.uniformMatrix4fv(u.shader.uniforms.lightProjViewMatrix,!1,h.projViewMatrix),this.drawScene(this.scene,r,function(e){return e.material&&e.material.receiveShadows});break;case"reflection":u.use(),t.cullFace(t.FRONT),this.drawScene(this.scene,r),t.cullFace(t.BACK);break;case"diffuse":u.use(),this.useTexture(this.getBufferTexture("reflection"),"reflectionBuffer",0),this.drawScene(this.scene,r,function(e){return!e.guide}),this.drawGrid();break;case"guides":u.use(),l&&this.disable(t.CULL_FACE),this.drawScene(this.scene,r,function(e){return e.guide}),this.drawMesh(this.scene.curosr),l&&this.enable(t.CULL_FACE)}if(u.id in this.readings){var f=this.readings[u.id];f.value=this.readPixels(f.x,f.y,1,1)}}}catch(d){n=!0,s=d}finally{try{i||null==o.return||o.return()}finally{if(n)throw s}}this.clearFramebuffer()}},{key:"readFromBuffer",value:function(e,t,r){this.readings[r]||(this.readings[r]={x:0,y:0,value:0}),this.readings[r].x=e,this.readings[r].y=t}},{key:"readPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=this.gl,s=new Uint8Array(r*i*4);return n.readPixels(e,t,r,i,n.RGBA,n.UNSIGNED_BYTE,s),s}},{key:"drawGrid",value:function(){var e=this.scene.grid;if(e&&this.gridEnabled){this.gridShader||(this.gridShader=new a.default,this.prepareShader(this.gridShader));var t=this.scene.activeCamera;t&&(this.useShader(this.gridShader),this.gl.uniformMatrix4fv(this.gridShader.uniforms.uProjMatrix,!1,t.projMatrix),this.gl.uniformMatrix4fv(this.gridShader.uniforms.uViewMatrix,!1,t.viewMatrix),this.drawGeo(e))}}},{key:"compositePasses",value:function(e){for(var t in this.gl.clearColor(.08,.08,.08,1),this.clear(),this.viewport(this.width,this.height),this.useShader(this.compShader),e){var r=e[t];this.useTexture(r.buffer,r.id+"Buffer",t)}this.useTexture(this.getBufferTexture("depth"),"depthBuffer",e.length+1),this.gl.uniform1i(this.compShader.uniforms.fog,this.fogEnabled),this.drawGeo(this.renderTarget),this.gl.clearColor(0,0,0,0)}},{key:"prepareTexture",value:function(e){e.gltexture||(e.gltexture=this.createTexture(e.image||null))}},{key:"applyMaterial",value:function(e,t){var r=t.texture,i=t.reflectionMap,n=t.displacementMap;this.useTexture(null,"colorTexture",1),this.useTexture(null,"reflectionMap",2),this.useTexture(null,"displacementMap",3),this.prepareTexture(r),r.img&&r.gltexture&&this.useTexture(r.gltexture,"colorTexture",1),this.gl.uniform1f(e.uniforms.textureized,r.img?1:0),this.prepareTexture(i),i.img&&i.gltexture&&this.useTexture(i.gltexture,"reflectionMap",2),this.prepareTexture(n),n.img&&n.gltexture&&this.useTexture(n.gltexture,"displacementMap",3),this.gl.uniform1f(e.uniforms.scaleUniform,t.scaleUniform),this.gl.uniform1f(e.uniforms.textureScale,t.textureScale),this.gl.uniform3fv(e.uniforms.diffuseColor,t.diffuseColor),this.gl.uniform1f(e.uniforms.reflection,t.reflection),this.gl.uniform1f(e.uniforms.transparency,t.transparency)}},{key:"drawScene",value:function(e,t,r){t=t||e.activeCamera;var i=e.objects,n=this.currentShader;this.gl.uniformMatrix4fv(n.uniforms.uProjMatrix,!1,t.projMatrix),this.gl.uniformMatrix4fv(n.uniforms.uViewMatrix,!1,t.viewMatrix);var s=0,a=!0,o=!1,u=void 0;try{for(var h,l=i[Symbol.iterator]();!(a=(h=l.next()).done);a=!0){var f=h.value;f.isLight&&(this.gl.uniform3fv(n.uniforms["pointLights["+s+"].position"],[f.position.x,f.position.y,f.position.z]),this.gl.uniform3fv(n.uniforms["pointLights["+s+"].color"],f.color),this.gl.uniform1f(n.uniforms["pointLights["+s+"].intensity"],f.intensity),this.gl.uniform1f(n.uniforms["pointLights["+s+"].size"],f.size),s++)}}catch(v){o=!0,u=v}finally{try{a||null==l.return||l.return()}finally{if(o)throw u}}var d=!0,c=!1,g=void 0;try{for(var p,m=i[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var y=p.value;(r&&r(y)||!r)&&this.drawMesh(y)}}catch(v){c=!0,g=v}finally{try{d||null==m.return||m.return()}finally{if(c)throw g}}}},{key:"drawMesh",value:function(e){var t=this.currentShader;e.material&&!e.hidden&&(this.applyMaterial(t,e.material),this.drawGeo(e))}},{key:"drawGeo",value:function(e){if(!e.hidden){var t=this.gl,r=e.buffer;this.initializeBuffersAndAttributes(r),this.setGeoTransformUniforms(e);var i=t[r.type];r.indecies.length>0?t.drawElements(i,r.indecies.length,t.UNSIGNED_SHORT,0):t.drawArrays(i,0,r.vertecies.length/r.elements)}}},{key:"gridEnabled",get:function(){return u.default.global.getValue("drawGrid",!0)}},{key:"fogEnabled",get:function(){return u.default.global.getValue("fogEnabled",!0)}},{key:"frameRate",get:function(){return 1e3/this.frameTime}}],[{key:"defaults",get:function(){return{resolution:[window.innerWidth,window.innerHeight]}}}]),h}();exports.Renderer=M;var k=function(){function e(t,r,i,n,s,a){p(this,e),this.id=r,this.shader=i,this.renderer=t,i.initialized||this.renderer.prepareShader(i),this.width=s,this.height=s/n,a?this.renderer.createFramebuffer(this.id,this.width,this.height).depthbuffer():this.renderer.createFramebuffer(this.id,this.width,this.height).colorbuffer()}return y(e,[{key:"buffer",get:function(){return this.renderer.getBufferTexture(this.id)}},{key:"depthbuffer",get:function(){return this.renderer.getBufferTexture(this.id+"Depth")}}]),y(e,[{key:"use",value:function(){this.renderer.useFramebuffer(this.id),this.renderer.clear(),this.renderer.viewport(this.width,this.height),this.renderer.useShader(this.shader)}}]),e}();
},{"../geo/Plane":"5vRv","../renderer/GL":"tYIj","../shader/FinalShader":"hZdr","../shader/ColorShader":"A4z7","../shader/LightShader":"OGcb","../shader/ReflectionShader":"6nW3","../shader/PrimitiveShader":"xS43","../Logger":"7m5u","../Config":"1cqe"}],"WyN6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Grid=void 0;var t=require("../scene/Geometry.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return i(t)||o(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?f(t):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(e){function n(t,e){var r;return u(this,n),(r=c(this,a(n).call(this))).size=t,r.count=e,r.drawmode="LINES",r}return s(n,t.Geometry),p(n,[{key:"vertecies",get:function(){return this.generate(this.size,this.count)}}]),p(n,[{key:"generate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14,n=[],o=t*e/2,i=-e/2;i<=e/2;i++){var u=[.5,.5,.5];0==i&&(u=[.15,.15,1]),n.push.apply(n,[t*i,0,o,0,0].concat(r(u),[t*i,0,-o,0,0],r(u)))}for(var c=-e/2;c<=e/2;c++){var f=[.5,.5,.5];0==c&&(f=[1,.15,.15]),n.push.apply(n,[o,0,t*c,0,0].concat(r(f),[-o,0,t*c,0,0],r(f)))}return n}}]),n}();exports.Grid=b;
},{"../scene/Geometry.js":"27B5"}],"b7W6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DirectionalLight=void 0;var t=require("gl-matrix"),e=require("../camera/Camera");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(o){function i(){return r(this,i),a(this,u(i).apply(this,arguments))}return c(i,e.Camera),n(i,[{key:"update",value:function(){var e=this.projMatrix,o=this.viewMatrix,r=this.sensor.width/this.sensor.height;t.mat4.perspective(e,Math.PI/180*this.fov,r,this.nearplane,this.farplane),t.mat4.lookAt(o,t.vec3.fromValues(0,0,0),t.vec3.fromValues(this.lookAt.x,this.lookAt.y,this.lookAt.z),t.vec3.fromValues(0,1,0)),t.mat4.scale(o,o,t.vec3.fromValues(this.scale,this.scale,this.scale)),t.mat4.translate(o,o,t.vec3.fromValues(this.position.x,this.position.y,this.position.z)),t.mat4.rotateX(o,o,Math.PI/180*this.rotation.x),t.mat4.rotateY(o,o,Math.PI/180*this.rotation.y),t.mat4.multiply(this.projViewMatrix,this.projMatrix,this.viewMatrix)}},{key:"isLight",get:function(){return!0}}]),i}();exports.DirectionalLight=l;
},{"gl-matrix":"IF0X","../camera/Camera":"0Jjv"}],"xk0m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./Material");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?n(t):o}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(e){function n(){var t;return o(this,n),(t=r(this,i(n).call(this,"PRIMITIVE"))).receiveShadows=!1,t.castShadows=!1,t.scaleUniform=!0,t}return u(n,t.Material),n}();exports.default=f;
},{"./Material":"9euP"}],"AuCE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Guide=void 0;var e=n(require("../materials/PrimitiveMaterial")),t=require("../Math"),r=require("../scene/Geometry");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=new e.default,b=function(e){function n(){return i(this,n),f(this,l(n).apply(this,arguments))}return s(n,r.Geometry),c(n,[{key:"onCreate",value:function(e){e.guide=!0,e.material=y,e.drawmode="LINES"}},{key:"vertecies",get:function(){var e=10*this.scale||10,r=this.origin||new t.Vec,n=r.x,o=r.y,i=r.z;return[n,o,i+e,0,1,1,1,1,n,o,i+-e,0,1,1,1,1,n,o+e,i,0,1,1,1,1,n,o-e,i,0,1,1,1,1,n+e,o,i,0,1,1,1,1,n-e,o,i,0,1,1,1,1]}}]),n}();exports.Guide=b;
},{"../materials/PrimitiveMaterial":"xk0m","../Math":"ayzy","../scene/Geometry":"27B5"}],"D71Y":[function(require,module,exports) {
module.exports="/cursor.40f87e2a.obj";
},{}],"BWbL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cursor=void 0;var e=require("../Math"),t=require("./Guide"),r=require("../Loader"),o=require("../Resources");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){return f(e)||c(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function f(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=d(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}o.Resources.add({cursor_model:require("../../res/models/cursor.obj")},!1);var v=function(n){function i(){return a(this,i),p(this,h(i).apply(this,arguments))}return m(i,t.Guide),l(i,[{key:"onCreate",value:function(e){b(h(i.prototype),"onCreate",this).call(this,e),e.drawmode="TRIANGLES",this.scale=32,this.cursorVerts=r.Loader.loadObjFile(o.Resources.get("cursor_model"))}},{key:"vertecies",get:function(){var t=.75,r=new e.Vec,o=r.x,n=r.y,i=r.z;return[o+t,n,i,0,0,0,0,1,o,n,i+t,0,0,0,0,1,o,n,i,0,0,0,0,1,o,n,i+t,0,0,0,1,0,o,n+t,i,0,0,0,1,0,o,n,i,0,0,0,1,0,o,n,i,0,0,1,0,0,o,n+t,i,0,0,1,0,0,o+t,n,i,0,0,1,0,0].concat(u(this.cursorVerts))}}]),i}();exports.Cursor=v;
},{"../Math":"ayzy","./Guide":"AuCE","../Loader":"2jOf","../Resources":"FwQv","../../res/models/cursor.obj":"D71Y"}],"JAHL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var e=require("../camera/Camera"),r=require("../geo/Grid.js"),t=require("../light/DirectionalLight"),i=require("../Math.js"),a=require("../geo/Cursor");function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var u=function(){function e(){var o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).camera;n(this,e),this.objects=new Set,this.lightSources=new t.DirectionalLight({fov:90,position:new i.Vec(0,0,-8e3),rotation:new i.Vec(20,20,0)}),this.activeCamera=o,this.grid=new r.Grid(100,20),this.curosr=new a.Cursor}return c(e,[{key:"add",value:function(e){var r=this;Array.isArray(e)?e.forEach(function(e){return r.objects.add(e)}):this.objects.add(e)}},{key:"remove",value:function(e){var r=this;Array.isArray(e)?e.forEach(function(e){return r.objects.delete(e)}):this.objects.delete(e)}},{key:"clear",value:function(){this.objects.clear()}},{key:"update",value:function(){this.activeCamera.update()}}]),e}();exports.Scene=u;
},{"../camera/Camera":"0Jjv","../geo/Grid.js":"WyN6","../light/DirectionalLight":"b7W6","../Math.js":"ayzy","../geo/Cursor":"BWbL"}],"aJ6T":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var u=t[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function n(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Task=exports.Scheduler=void 0;var u=function(){function t(){e(this,t),this.queue=[]}return n(t,[{key:"addTask",value:function(e){e instanceof r&&this.queue.push(e)}},{key:"removeTask",value:function(e){var t=this.queue.indexOf(e);-1!=t&&this.queue.splice(t,1)}},{key:"requestTask",value:function(){return this.queue.length>0?this.queue[0]:null}},{key:"run",value:function(e){var t=!0,n=!1,u=void 0;try{for(var r,i=this.queue[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;a.execute(e)&&this.removeTask(a)}}catch(o){n=!0,u=o}finally{try{t||null==i.return||i.return()}finally{if(n)throw u}}}}]),t}();exports.Scheduler=u;var r=function(){function t(){e(this,t)}return n(t,[{key:"execute",value:function(e){return!0}}]),t}();exports.Task=r;
},{}],"uD6w":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CursorControler=void 0;var t=require("./EntityControler"),e=require("../Math");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(o){function i(t,e){var o;return n(this,i),(o=u(this,c(i).call(this,t))).viewport=e,o.initMouse(),o}return a(i,t.EntityControler),r(i,[{key:"initMouse",value:function(){var t=this,o=this.entity,n=this.viewport.renderer,i=this.viewport.camera,r=!1,u=[0,0,0],s=new e.Vec(0,o.position.y+10,0),c=new e.Vec(0,1,0),a=[];this.viewport.addEventListener("click",function(e){var o=e.x,i=t.viewport.renderer.height-e.y;n.readings.guides?(n.readings.guides.x=o,n.readings.guides.y=i):n.readFromBuffer(o,i,"guides")}),this.viewport.addEventListener("mousedown",function(f){!function(){if(n.readings.guides){var e=n.readings.guides.value;u=[0,0,0],e[0]>0&&(u[0]=1),e[1]>0&&(u[1]=1),e[2]>0&&(u[2]=1),t.interaction(u)}}();var p=new e.Raycast(i,f.x,f.y).hit(s,c);a=[p.position[0]-o.position.x,p.position[1]-o.position.y,p.position[2]-o.position.z],r=!0}),this.viewport.addEventListener("mouseup",function(t){r=!1}),this.viewport.addEventListener("mousemove",function(t){if(r){var n=new e.Raycast(i,t.x,t.y).hit(s,c),f=n.position[0]-a[0],p=n.position[1]-a[1],y=n.position[2]-a[2];n&&(u[0]&&(o.position.x=f),u[1]&&(o.position.y=p),u[2]&&(o.position.z=y))}})}},{key:"interaction",value:function(t){}}]),i}();exports.CursorControler=p;
},{"./EntityControler":"97xH","../Math":"ayzy"}],"C72Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./src/camera/FirstPersonCamera"),t=require("./src/controlers/FirstPersonControler"),r=require("./src/Loader.js"),n=require("./src/Logger.js"),o=require("./src/renderer/Renderer"),i=require("./src/Resources.js"),c=require("./src/scene/Scene.js"),s=require("./src/Math"),u=require("./src/Scheduler"),a=require("./src/controlers/CursorController");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||!g(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,R(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)})(e)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function b(e,t,r){return(b=w()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&S(o,r.prototype),o}).apply(null,arguments)}function g(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=new n.Logger("Viewport"),F=0,O=0,k=0,C=128,q=function(n){function l(){var e;return f(this,l),(e=p(this,R(l).call(this))).attachShadow({mode:"open"}),e.root=e.shadowRoot,e.root.innerHTML=e.constructor.template,e.canvas=document.createElement("canvas"),e.root.appendChild(e.canvas),e.lastFrame={},e}return v(l,m(HTMLElement)),y(l,null,[{key:"template",get:function(){return"\n            <style>\n                :host {\n                    display: block;\n                }\n                canvas {\n                    width: 100%;\n                    height: 100%;\n                }\n            </style>\n        "}}]),y(l,[{key:"connectedCallback",value:function(){var e=this;i.Resources.load().then(function(){j.log("resources loaded"),e.init(e.canvas),j.log("resources initialized"),e.render()})}},{key:"onRender",value:function(){var e=this.canvas.clientWidth,t=this.canvas.clientHeight;e==this.lastFrame.width&&t==this.lastFrame.height||(this.renderer.setResolution(e,t),this.renderer.updateViewport()),this.lastFrame.width=e,this.lastFrame.height=t}},{key:"render",value:function(){this.onRender();var e=performance.now(),t=e-O;(k+=t)>=1e3/C&&(k=0,this.scheduler.run(t),this.scene.update(t)),this.renderer.draw(),O=e,F=requestAnimationFrame(this.render.bind(this))}},{key:"init",value:function(n){var c=i.Resources.get("materials");for(var l in c)r.Loader.createMatFromJson(l,c[l]);this.scheduler=new u.Scheduler,this.renderer=new o.Renderer(n),this.camera=new e.FirstPersonCamera({fov:90,position:new s.Vec(0,-400,-2500),rotation:new s.Vec(15,0,0)});var f=new t.FirstPersonControler(this.camera,n);this.createScene(),new a.CursorControler(this.scene.curosr,this).interaction=function(e){e[0]||e[1]||e[2]?f.lock():f.unlock()},this.dispatchEvent(new Event("load"))}},{key:"setCursor",value:function(e){e?(this.scene.curosr.hidden=!1,this.scene.curosr.position=new s.Vec(e.position),e.position=this.scene.curosr.position):this.scene.curosr.hidden=!0}},{key:"createScene",value:function(){var e=new c.Scene({camera:this.camera});return this.scene=e,this.renderer.setScene(e),e}}]),l}();exports.default=q,customElements.define("gl-viewport",q),module.exports=q;
},{"./src/camera/FirstPersonCamera":"5ncX","./src/controlers/FirstPersonControler":"tekt","./src/Loader.js":"2jOf","./src/Logger.js":"7m5u","./src/renderer/Renderer":"9oJ+","./src/Resources.js":"FwQv","./src/scene/Scene.js":"JAHL","./src/Math":"ayzy","./src/Scheduler":"aJ6T","./src/controlers/CursorController":"uD6w"}],"epCI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Keyframe=exports.Animation=void 0;var e=require("./Scheduler");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(r){function o(t,e){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n(this,o),(r=u(this,s(o).call(this))).keyframes=[],r.playing=!1,r.duration=i,r.loop=a,r.target={object:t,property:e},r.reset(),r}return p(o,e.Task),i(o,[{key:"execute",value:function(t){return this.animate(t),!this.playing}},{key:"reset",value:function(){this.time=0}},{key:"stop",value:function(){this.playing=!1}},{key:"animate",value:function(t){var e=this.keyframes.length;if(this.playing=!0,this.time+=t,this.time>=this.duration)this.reset(),this.loop||this.stop();else{var r=Math.floor(this.duration/(e-1)),n=this.time/r,o=this.keyframes[Math.floor(n)],i=this.keyframes[Math.floor(n)+1],u=n-Math.floor(n);this.applyAnimation(o,i,u)}}},{key:"applyAnimation",value:function(t,e,r){var n=this.target.object,o=this.target.property;for(var i in n[o])n[o][i]=this.linearLerp(t.value[i],e.value[i],r)}},{key:"linearLerp",value:function(t,e,r){return t+r*(e-t)}},{key:"bezierLerp",value:function(e,r,n,o,i){var u=linear(p0,p1,t),a=Lerp(p1,p2,t),s=Lerp(p2,p3,t),p=Lerp(u,a,t),f=Lerp(a,s,t);Lerp(p,f,t)}},{key:"setKeyframe",value:function(t){this.keyframes.push(t)}}]),o}();exports.Animation=l;var c=function(){function t(e){n(this,t),this.input=e}return i(t,[{key:"value",get:function(){var t=[this.input];return Array.isArray(this.input)&&(t=this.input),t}}]),t}();exports.Keyframe=c;
},{"./Scheduler":"aJ6T"}],"anvv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector=void 0;var t=r(require("../materials/DefaultMaterial")),e=require("../scene/Geometry");function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return c(t)||u(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),t}function p(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=new t.default,v=function(t){function r(){return a(this,r),p(this,s(r).apply(this,arguments))}return b(r,e.Geometry),l(r,[{key:"onCreate",value:function(t){t.guide=!0,t.material=m,t.drawmode="LINE_STRIP",t.points=t.points||[],this.points=t.points,this.color=[1,1,1]}},{key:"update",value:function(){this._buffer=null}},{key:"vertecies",get:function(){var t=[],e=!0,r=!1,n=void 0;try{for(var i,u=this.points[Symbol.iterator]();!(e=(i=u.next()).done);e=!0){var c=i.value,a=c.x,f=c.y,l=c.z;t.push.apply(t,[a,f,l,0,0].concat(o(this.color)))}}catch(p){r=!0,n=p}finally{try{e||null==u.return||u.return()}finally{if(r)throw n}}return t}}]),r}();exports.Vector=v;
},{"../materials/DefaultMaterial":"vwKi","../scene/Geometry":"27B5"}],"uduN":[function(require,module,exports) {
module.exports="/placeholder_256.dd8bb34c.png";
},{}],"FaLJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../Resources"),t=require("./Material"),r=require("./Texture");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}e.Resources.add({texture256:require("../../res/textures/placeholder_256.png")},!1);var a=function(o){function i(){var t;n(this,i),t=u(this,c(i).call(this,"TEST"));var o=e.Resources.get("texture256");return t.texture=new r.Texture(o),t.textureScale=256,t.diffuseColor=[1,1,1],t.receiveShadows=!0,t.castShadows=!0,t}return f(i,t.Material),i}();exports.default=a;
},{"../Resources":"FwQv","./Material":"9euP","./Texture":"oIOy","../../res/textures/placeholder_256.png":"uduN"}],"2+jx":[function(require,module,exports) {
module.exports="/test.ef095697.obj";
},{}],"r+vF":[function(require,module,exports) {
"use strict";var e=l(require("../../Viewport.js")),r=require("../../src/Math.js"),a=l(require("../../src/Config.js")),s=require("../../src/Resources.js"),n=require("../../src/Loader.js"),t=require("../../src/Animation.js"),i=require("../../src/Scheduler.js"),o=require("../../src/geo/Guide.js"),u=require("../../src/geo/Vector.js"),c=require("../../src/scene/Geometry.js"),d=l(require("../../src/materials/TestMaterial.js"));function l(e){return e&&e.__esModule?e:{default:e}}var m=new e.default;s.Resources.add({box_model:require("../../res/models/test.obj")},!1),m.onload=function(){var e=m.scheduler,l=m.scene,w=n.Loader.loadObjFile(s.Resources.get("box_model")),f=new c.Geometry({vertecies:w,material:new d.default,scale:100});l.add(f);var y=m.camera,p=new t.Animation(y,"position",3e3,!0);p.setKeyframe(new t.Keyframe(new r.Vec(0,-200,0))),p.setKeyframe(new t.Keyframe(new r.Vec(0,-1e3,500))),e.addTask(p);var V=new t.Animation(y,"rotation",3e3,!0);V.setKeyframe(new t.Keyframe(new r.Vec(1,-1.5,0))),V.setKeyframe(new t.Keyframe(new r.Vec(.14,-2.1,0))),e.addTask(V),l.add(new o.Guide({position:r.Vec.multiply(p.keyframes[0].input,new r.Vec(-1,-1,-1))})),l.add(new o.Guide({position:r.Vec.multiply(p.keyframes[1].input,new r.Vec(-1,-1,-1))})),l.add(new u.Vector({points:[r.Vec.multiply(p.keyframes[0].input,new r.Vec(-1,-1,-1)),r.Vec.multiply(p.keyframes[1].input,new r.Vec(-1,-1,-1))]})),m.setCursor(f);var j=a.default.global.getValue("camera");j&&y.setPositionTo(new r.Transform(j));var q=new i.Task;q.execute=function(e){return a.default.global.setValue("camera",y),campos.innerText=y.position+"  |  "+y.rotation,!1},e.addTask(q)},window.addEventListener("DOMContentLoaded",function(){document.body.appendChild(m)});
},{"../../Viewport.js":"C72Q","../../src/Math.js":"ayzy","../../src/Config.js":"1cqe","../../src/Resources.js":"FwQv","../../src/Loader.js":"2jOf","../../src/Animation.js":"epCI","../../src/Scheduler.js":"aJ6T","../../src/geo/Guide.js":"AuCE","../../src/geo/Vector.js":"anvv","../../src/scene/Geometry.js":"27B5","../../src/materials/TestMaterial.js":"FaLJ","../../res/models/test.obj":"2+jx"}]},{},["r+vF"], null)
//# sourceMappingURL=/main.842a6313.js.map